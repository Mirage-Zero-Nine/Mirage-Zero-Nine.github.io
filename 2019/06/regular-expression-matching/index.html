<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.57.2 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="Steve Zhou">
<meta name="keywords" content="">
<meta name="description" content="">


<meta property="og:description" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Regular Expression Matching">
<meta name="twitter:title" content="Regular Expression Matching">
<meta property="og:url" content="https://yyzhou95.github.io/2019/06/regular-expression-matching/">
<meta property="twitter:url" content="https://yyzhou95.github.io/2019/06/regular-expression-matching/">
<meta property="og:site_name" content="Bingo!">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2019-06-06T00:00:00">
  
  
    <meta property="article:modified_time" content="2019-06-06T00:00:00">
  
  
  
    
      <meta property="article:section" content="Algorithm">
    
  
  
    
      <meta property="article:tag" content="Dynamic programming">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://yyzhou95.github.io/img/avatar.jpg">
  <meta property="twitter:image" content="https://yyzhou95.github.io/img/avatar.jpg">


    <title>Regular Expression Matching</title>

    <link rel="icon" href="https://yyzhou95.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://yyzhou95.github.io/2019/06/regular-expression-matching/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://yyzhou95.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://yyzhou95.github.io/">Bingo!</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://yyzhou95.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://yyzhou95.github.io/#about">
          <img class="sidebar-profile-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Steve Zhou</h4>
        
          <h5 class="sidebar-profile-bio">Bingo!</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yyzhou95" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yyzhou95/yyzhou95.github.io" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-link"></i>
      
      <span class="sidebar-button-desc">Source Code</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-center">
  
    <h1 class="post-title" itemprop="headline">
      Regular Expression Matching
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-06-06T00:00:00Z">
        
  June 6, 2019

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://yyzhou95.github.io/categories/algorithm">Algorithm</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>Links:</p>

<ul>
<li><a href="https://leetcode.com/problems/regular-expression-matching">Regular Expression Matching</a></li>
<li><a href="https://leetcode.com/problems/wildcard-matching/">Wildcard Matching</a></li>
</ul>

<h2 id="problem-description">Problem description</h2>

<p><strong>Regular Expression Matching</strong></p>

<p>Given an input string (<code>s</code>) and a pattern (<code>p</code>), implement regular expression matching with support for <code>'.'</code> and <code>'*'</code>.</p>

<pre><code>'.' Matches any single character.
'*' Matches zero or more of the preceding element.
</code></pre>

<p>The matching should cover the <strong>entire</strong> input string (not partial).</p>

<p><strong>Note:</strong></p>

<ul>
<li><code>s</code> could be empty and contains only lowercase letters <code>a-z</code>.</li>
<li><code>p</code> could be empty and contains only lowercase letters <code>a-z</code>, and characters like <code>.</code> or <code>*</code>.</li>
</ul>

<p><strong>Example 1:</strong></p>

<pre><code>Input:
s = &quot;aa&quot;
p = &quot;a&quot;
Output: false
Explanation: &quot;a&quot; does not match the entire string &quot;aa&quot;.
</code></pre>

<p><strong>Example 2:</strong></p>

<pre><code>Input:
s = &quot;aa&quot;
p = &quot;a*&quot;
Output: true
Explanation: '*' means zero or more of the precedeng element, 'a'. Therefore, by repeating 'a' once, it becomes &quot;aa&quot;.
</code></pre>

<p><strong>Example 3:</strong></p>

<pre><code>Input:
s = &quot;ab&quot;
p = &quot;.*&quot;
Output: true
Explanation: &quot;.*&quot; means &quot;zero or more (*) of any character (.)&quot;.
</code></pre>

<p><strong>Example 4:</strong></p>

<pre><code>Input:
s = &quot;aab&quot;
p = &quot;c*a*b&quot;
Output: true
Explanation: c can be repeated 0 times, a can be repeated 1 time. Therefore it matches &quot;aab&quot;.
</code></pre>

<p><strong>Example 5:</strong></p>

<pre><code>Input:
s = &quot;mississippi&quot;
p = &quot;mis*is*p*.&quot;
Output: false
</code></pre>

<p><strong>Wildcard Matching</strong></p>

<p>Given an input string (<code>s</code>) and a pattern (<code>p</code>), implement wildcard pattern matching with support for <code>'?'</code> and <code>'*'</code>.</p>

<pre><code>'?' Matches any single character.
'*' Matches any sequence of characters (including the empty sequence).
</code></pre>

<p>The matching should cover the <strong>entire</strong> input string (not partial).</p>

<p><strong>Note:</strong></p>

<ul>
<li><code>s</code> could be empty and contains only lowercase letters <code>a-z</code>.</li>
<li><code>p</code> could be empty and contains only lowercase letters <code>a-z</code>, and characters like <code>?</code> or <code>*</code>.</li>
</ul>

<p><strong>Example 1:</strong></p>

<pre><code>Input:
s = &quot;aa&quot;
p = &quot;a&quot;
Output: false
Explanation: &quot;a&quot; does not match the entire string &quot;aa&quot;.
</code></pre>

<p><strong>Example 2:</strong></p>

<pre><code>Input:
s = &quot;aa&quot;
p = &quot;*&quot;
Output: true
Explanation: '*' matches any sequence.
</code></pre>

<p><strong>Example 3:</strong></p>

<pre><code>Input:
s = &quot;cb&quot;
p = &quot;?a&quot;
Output: false
Explanation: '?' matches 'c', but the second letter is 'a', which does not match 'b'.
</code></pre>

<p><strong>Example 4:</strong></p>

<pre><code>Input:
s = &quot;adceb&quot;
p = &quot;*a*b&quot;
Output: true
Explanation: The first '*' matches the empty sequence, while the second '*' matches the substring &quot;dce&quot;.
</code></pre>

<p><strong>Example 5:</strong></p>

<pre><code>Input:
s = &quot;acdcb&quot;
p = &quot;a*c?b&quot;
Output: false
</code></pre>

<h2 id="method">Method</h2>

<p><strong>Regular Expression Matching</strong></p>

<p>This is a typical dynamic programming with 2D table problem. The key is to find the state transition formulation.</p>

<p>The idea would be to reduce the problem to simple ones. For example, there is a string <code>adcebdk</code> and pattern <code>*a*b?k</code>, and we want to compute if there is a match for them: <code>D = True/False</code>. One could notice that it seems to be more simple for short strings and patterns and so it would be logical to relate a match <code>D[p_len][s_len]</code> with the lengths <code>p_len</code> and <code>s_len</code> of input pattern and string correspondingly.</p>

<p>There are several conditions for state transition, assuming column of boolean table representing pattern string. Note that boolean table has one more row and column than string, hence, if using string index in iteration, corresponding table index should be index + 1.</p>

<ul>
<li>First of all, iterate the first row of table, and if <code>*</code>is met, fill <code>dp[0][i+1]</code> with value in <code>dp[0][i+1]</code>. This is for the case of pattern starts with <code>.*</code>.</li>
<li>Then iterating table start from second row and column.</li>
<li>If current char in string and pattern is not matched and none of them are <code>.</code> or <code>*</code>, fill false in current table cell.</li>
<li>If current char in pattern is <code>.</code>, then it means matching any char, therefore, fill current table cell with previous cell, which is <code>dp[i][j]</code>.</li>
<li>The same situation happens when pattern and string has same char.</li>
<li>If current char in pattern is <code>*</code>, then there are two conditions. First, if <code>p.charAt(j - 1) != s.charAt(i) &amp;&amp; p.charAt(j - 1) != '.'</code>, then it means this <code>*</code> can only match previous pattern in 0 time, since previous char in pattern is not match to the char in string. The second condition is the rest situations. In this situation it means char before <code>*</code> can match more than one time. The <code>.</code> has same function as two same char.</li>
<li>Finally, return <code>dp[s.length()][p.length()]</code>.</li>
</ul>

<p><strong>Wildcard Matching</strong></p>

<p>This problemâ€™s only difference to previous one is the matching field of <code>*</code>. In this problem, the <code>*</code> can match any sequence including empty sequence. Therefore, <code>*</code> is the real wildcard in this problem. If current char in pattern is <code>*</code>, then <code>dp[i + 1][j + 1] = dp[i + 1][j] || dp[i][j + 1]</code>.</p>

<h2 id="code">Code</h2>

<h3 id="regular-expression-matching">Regular Expression Matching</h3>

<pre><code class="language-java">/**
 * Dynamic programming with 2D table.
 * Conditions:
 * if (p.charAt(j) == s.charAt(i) || p.charAt(j) == '.') -&gt;  dp[i + 1][j + 1] = dp[i][j]
 * if (p.charAt(j) == '*'):
 * 1. p.charAt(j - 1) != s.charAt(i): match previous char in 0 time
 * 2. p.charAt(j - 1) == s.charAt(i): match either previous char in string or pattern, or match previous char 0 time
 * If either condition is satisfied, return false.
 *
 * @param s string
 * @param p pattern string
 * @return if string is matched to pattern
 */
public boolean isMatch(String s, String p) {

    /* Corner case */
    if (s == null || p == null) {
        return false;
    }

    boolean[][] dp = new boolean[s.length() + 1][p.length() + 1];
    dp[0][0] = true;

    for (int i = 0; i &lt; p.length(); i++) {
        if (p.charAt(i) == '*' &amp;&amp; dp[0][i - 1]) {       // only p contains '.' or '*'
            dp[0][i + 1] = true;
        }
    }

    for (int i = 0; i &lt; s.length(); i++) {
        for (int j = 0; j &lt; p.length(); j++) {
            if (s.charAt(i) == p.charAt(j) || p.charAt(j) == '.') {
                dp[i + 1][j + 1] = dp[i][j];        // if previous string &amp; pattern is matched, then it matches now
            }

            if (p.charAt(j) == '*') {
                if (p.charAt(j - 1) != s.charAt(i) &amp;&amp; p.charAt(j - 1) != '.') {
                    dp[i + 1][j + 1] = dp[i + 1][j - 1];        // match char before '*' pattern
                } else {
                    dp[i + 1][j + 1] = dp[i + 1][j] || dp[i][j + 1] || dp[i + 1][j - 1];        // match either previous string or pattern, or 0 time
                }
            }
        }
    }

    for (boolean[] booleans : dp) {
        System.out.println(Arrays.toString(booleans));
    }
    return dp[s.length()][p.length()];
}
</code></pre>

<h3 id="wildcard-matching">Wildcard Matching</h3>

<pre><code class="language-java">/**
 * Dynamic programming with 2D table.
 * Conditions:
 * if (p.charAt(j) == s.charAt(i) || p.charAt(j) == '.') -&gt;  dp[i + 1][j + 1] = dp[i][j]
 * if (p.charAt(j) == '*'): since '*' can match empty string, then directly fill dp[i + 1][j] || dp[i][j + 1]
 * If either condition is satisfied, return false.
 *
 * @param s string
 * @param p pattern string
 * @return if string is matched to pattern
 */
public boolean isMatch(String s, String p) {

    /* Corner case */
    if (s == null || p == null) {
        return false;
    }

    boolean[][] dp = new boolean[s.length() + 1][p.length() + 1];
    dp[0][0] = true;        // empty string matches empty string

    for (int i = 0; i &lt; p.length(); i++) {
        if (p.charAt(i) == '*') {        // only p contains '.' or '*'
            dp[0][i + 1] = true;        // '*' can match empty string
        } else {
            break;
        }
    }

    for (int i = 0; i &lt; s.length(); i++) {
        for (int j = 0; j &lt; p.length(); j++) {
            if (s.charAt(i) == p.charAt(j) || p.charAt(j) == '?') {
                dp[i + 1][j + 1] = dp[i][j];
            }
            if (p.charAt(j) == '*') {
                dp[i + 1][j + 1] = dp[i + 1][j] || dp[i][j + 1];
            }
        }
    }

    return dp[s.length()][p.length()];
}
</code></pre>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://yyzhou95.github.io/tags/dynamic-programming/">Dynamic programming</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/06/palindrome-partitioning/" data-tooltip="Palindrome Partitioning">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/06/generalized-abbreviation/" data-tooltip="Generalized Abbreviation">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Steve Zhou. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/06/palindrome-partitioning/" data-tooltip="Palindrome Partitioning">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/06/generalized-abbreviation/" data-tooltip="Generalized Abbreviation">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Steve Zhou</h4>
    
      <div id="about-card-bio">Bingo!</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Los Angeles
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://yyzhou95.github.io/img/bg.jpeg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://yyzhou95.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

