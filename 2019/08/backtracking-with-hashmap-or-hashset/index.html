<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.57.2 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="Steve Zhou">
<meta name="keywords" content="">
<meta name="description" content="">


<meta property="og:description" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Backtracking With HashMap or HashSet">
<meta name="twitter:title" content="Backtracking With HashMap or HashSet">
<meta property="og:url" content="https://yyzhou95.github.io/2019/08/backtracking-with-hashmap-or-hashset/">
<meta property="twitter:url" content="https://yyzhou95.github.io/2019/08/backtracking-with-hashmap-or-hashset/">
<meta property="og:site_name" content="Bingo!">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2019-08-19T00:00:00">
  
  
    <meta property="article:modified_time" content="2019-08-19T00:00:00">
  
  
  
    
      <meta property="article:section" content="LeetCode Solution">
    
      <meta property="article:section" content="Problem Set">
    
      <meta property="article:section" content="Pruning">
    
  
  
    
      <meta property="article:tag" content="Backtracking">
    
      <meta property="article:tag" content="HashMap/HashSet">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://yyzhou95.github.io/img/avatar.jpg">
  <meta property="twitter:image" content="https://yyzhou95.github.io/img/avatar.jpg">


    <title>Backtracking With HashMap or HashSet</title>

    <link rel="icon" href="https://yyzhou95.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://yyzhou95.github.io/2019/08/backtracking-with-hashmap-or-hashset/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://yyzhou95.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://yyzhou95.github.io/">Bingo!</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://yyzhou95.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://yyzhou95.github.io/#about">
          <img class="sidebar-profile-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Steve Zhou</h4>
        
          <h5 class="sidebar-profile-bio">Bingo!</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yyzhou95" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yyzhou95/yyzhou95.github.io" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-link"></i>
      
      <span class="sidebar-button-desc">Source Code</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-center">
  
    <h1 class="post-title" itemprop="headline">
      Backtracking With HashMap or HashSet
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-08-19T00:00:00Z">
        
  August 19, 2019

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://yyzhou95.github.io/categories/leetcode-solution">LeetCode Solution</a>, 
    
      <a class="category-link" href="https://yyzhou95.github.io/categories/problem-set">Problem Set</a>, 
    
      <a class="category-link" href="https://yyzhou95.github.io/categories/pruning">Pruning</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>Links:</p>

<ul>
<li><a href="https://leetcode.com/problems/word-break-ii">Word Break II</a></li>
<li><a href="https://leetcode.com/problems/can-i-win">Can I Win</a></li>
<li><a href="https://leetcode.com/problems/flip-game-ii">Flip Game II</a></li>
</ul>

<h2 id="word-break-ii">Word Break II</h2>

<h3 id="problem-description">Problem description</h3>

<p>Given a <strong>non-empty</strong> string <em>s</em> and a dictionary <em>wordDict</em> containing a list of <strong>non-empty</strong> words, add spaces in <em>s</em> to construct a sentence where each word is a valid dictionary word. Return all such possible sentences.</p>

<p><strong>Note:</strong></p>

<ul>
<li>The same word in the dictionary may be reused multiple times in the segmentation.</li>
<li>You may assume the dictionary does not contain duplicate words.</li>
</ul>

<p><strong>Example 1:</strong></p>

<pre><code>Input:
s = &quot;catsanddog&quot;
wordDict = [&quot;cat&quot;, &quot;cats&quot;, &quot;and&quot;, &quot;sand&quot;, &quot;dog&quot;]
Output:
[
  &quot;cats and dog&quot;,
  &quot;cat sand dog&quot;
]
</code></pre>

<p><strong>Example 2:</strong></p>

<pre><code>Input:
s = &quot;pineapplepenapple&quot;
wordDict = [&quot;apple&quot;, &quot;pen&quot;, &quot;applepen&quot;, &quot;pine&quot;, &quot;pineapple&quot;]
Output:
[
  &quot;pine apple pen apple&quot;,
  &quot;pineapple pen apple&quot;,
  &quot;pine applepen apple&quot;
]
Explanation: Note that you are allowed to reuse a dictionary word.
</code></pre>

<p><strong>Example 3:</strong></p>

<pre><code>Input:
s = &quot;catsandog&quot;
wordDict = [&quot;cats&quot;, &quot;dog&quot;, &quot;sand&quot;, &quot;and&quot;, &quot;cat&quot;]
Output:
[]
</code></pre>

<h3 id="method">Method</h3>

<p>The difference between this question and Word Break is that the requirement now became to find all sentences made up by words. Therefore, to return a full list of all valid words contain in string, backtracking seems a proper way. However, if simply implement backtracking to this problem, it will cause a TLE since there is a better way to solve it.</p>

<p>The solution is using DFS and a hash map to store previous result. The key of hash map is the incoming string, and the value is the list that contains the all sentences start with incoming string. And in this way, if incoming string is not valid, it can simply return an empty list as result.</p>

<h3 id="code">Code</h3>

<pre><code class="language-java">/**
 * Backtracking + HashMap.
 * Use hash map to store results during backtracking.
 * The key of hash map is string, and the value is all result can be formed under current given string.
 *
 * @param s        given string
 * @param wordDict given word dictionary
 * @return all possible sentences
 */
public List&lt;String&gt; wordBreak(String s, List&lt;String&gt; wordDict) {

    return backtracking(s, wordDict, new HashMap&lt;&gt;());
}

/**
 * Backtracking with hash map to store previous result.
 * Use hash map to store previous result to avoid TLE.
 *
 * @param s   string
 * @param dic given word dictionary
 * @param m   hash map store previous result
 * @return all possible sentences
 */
private List&lt;String&gt; backtracking(String s, List&lt;String&gt; dic, HashMap&lt;String, List&lt;String&gt;&gt; m) {

    if (m.containsKey(s)) {
        return m.get(s);        // avoid duplication
    }

    List&lt;String&gt; out = new ArrayList&lt;&gt;();       // save all combination under current result

    for (String w : dic) {

        if (s.startsWith(w)) {
            if (s.substring(w.length()).length() == 0) {
                out.add(w);     // if it is last word in given string
            } else {
                for (String subWord : backtracking(s.substring(w.length()), dic, m)) {
                    out.add(w + &quot; &quot; + subWord);     // find all words in substring and add to current result
                }
            }
        }
    }
    m.put(s, out);
    return out;
}
</code></pre>

<h2 id="can-i-win">Can I Win</h2>

<h3 id="problem-description-1">Problem description</h3>

<p>In the &ldquo;100 game,&rdquo; two players take turns adding, to a running total, any integer from 1..10. The player who first causes the running total to reach or exceed 100 wins.</p>

<p>What if we change the game so that players cannot re-use integers?</p>

<p>For example, two players might take turns drawing from a common pool of numbers of 1..15 without replacement until they reach a total &gt;= 100.</p>

<p>Given an integer <code>maxChoosableInteger</code> and another integer <code>desiredTotal</code>, determine if the first player to move can force a win, assuming both players play optimally.</p>

<p>You can always assume that <code>maxChoosableInteger</code> will not be larger than 20 and <code>desiredTotal</code> will not be larger than 300.</p>

<p><strong>Example</strong></p>

<pre><code>Input:
maxChoosableInteger = 10
desiredTotal = 11

Output:
false

Explanation:
No matter which integer the first player choose, the first player will lose.
The first player can choose an integer from 1 up to 10.
If the first player choose 1, the second player can only choose integers from 2 up to 10.
The second player will win by choosing 10 and get a total = 11, which is &gt;= desiredTotal.
Same with other integers chosen by the first player, the second player will always win.
</code></pre>

<h3 id="method-1">Method</h3>

<p>The key state is that, if next player lose, then current player wins. Therefore, this problem is to reduce the backtracking searching tree.</p>

<p>The wining state should be this: <strong>If current sum is larger than desire sum, then previous player lost (current player wins).</strong></p>

<p>So, iterate from 1 to max choosable number, and at each number, generate a search tree to see when it reaches the winning state.</p>

<p>Note that the key of hash map is actually the boolean array that store the each integer state, whether they were chosen or not. And the method to convert it from array to integer is to regard the array as binary number. For instance, <code>[ture, false, ture, false]</code> can be regarded as <code>1010</code>.</p>

<h3 id="code-1">Code</h3>

<pre><code class="language-java">private HashMap&lt;Integer, Boolean&gt; m = new HashMap&lt;&gt;();       // hash map store backtrack temp result

/**
 * Backtracking with pruning to reduce time.
 *
 * @param maxChoosableInteger max choosable integer
 * @param desiredTotal        total to reach
 * @return if the first player to move can force a win
 */
public boolean canIWin(int maxChoosableInteger, int desiredTotal) {

    /* Corner case */
    if (desiredTotal &lt;= maxChoosableInteger) {
        return true;
    }
    if (maxChoosableInteger + maxChoosableInteger * (maxChoosableInteger - 1) / 2 &lt; desiredTotal) {
        return false;
    }

    return backtracking(maxChoosableInteger + 1, new boolean[maxChoosableInteger + 1], desiredTotal);
}

/**
 * Backtracking with a hash map for pruning.
 *
 * @param max          max choosable integer
 * @param chosen       integers has been choosen
 * @param currentTotal current remaining total
 * @return if the first player to move can force a win
 */
private boolean backtracking(int max, boolean[] chosen, int currentTotal) {

    if (currentTotal &lt;= 0) {        // previous step has won
        return false;
    }

    int current = transfer(chosen);
    if (m.containsKey(current)) {
        return m.get(current);      // reuse previous result to reduce time
    }

    for (int i = 1; i &lt; max; i++) {

        if (!chosen[i]) {       // choose a new number for result tree
            chosen[i] = true;

            /* If next player lose, then current player wins */
            if (!backtracking(max, chosen, currentTotal - i)) {
                m.put(current, true);
                chosen[i] = false;      // flip back to previous situation for next iteration
                return true;            // only one winning situation will suffice
            }
            chosen[i] = false;      // flip back to previous situation for next iteration
        }
    }
    m.put(current, false);      // no winning situation for current player

    return false;
}


/**
 * Regard bit array as a integer and transfer it.
 *
 * @param arr given boolean array
 * @return integer that this array representing
 */
private int transfer(boolean[] arr) {
    int num = 0;
    for (boolean x : arr) {
        num &lt;&lt;= 1;      // left shift one bit
        if (x) {
            num |= 1;       // turn false to 0
        }
    }
    return num;
}
</code></pre>

<h2 id="flip-game-ii">Flip Game II</h2>

<h3 id="problem-description-2">Problem description</h3>

<p>You are playing the following Flip Game with your friend: Given a string that contains only these two characters: <code>+</code>and <code>-</code>, you and your friend take turns to flip two <strong>consecutive</strong> <code>&quot;++&quot;</code> into <code>&quot;--&quot;</code>. The game ends when a person can no longer make a move and therefore the other person will be the winner.</p>

<p>Write a function to determine if the starting player can guarantee a win.</p>

<p><strong>Example:</strong></p>

<pre><code>Input: s = &quot;++++&quot;
Output: true 
Explanation: The starting player can guarantee a win by flipping the middle &quot;++&quot; to become &quot;+--+&quot;.
</code></pre>

<h3 id="method-2">Method</h3>

<p>Use backtracking to find all possible solutions and determine if first player can win.</p>

<p>The backtracking process has to be done with a hash map to reduce time consumption. The key in hash map is current string, and value of it is whether this string can guarantee first player wins.</p>

<h3 id="code-2">Code</h3>

<pre><code class="language-java">/**
 * Backtracking with hash map.
 *
 * @param s given string
 * @return if first player can win
 */
public boolean canWin(String s) {
    if (s.length() &lt; 2) {
        return false;
    }
    HashMap&lt;String, Boolean&gt; m = new HashMap&lt;&gt;();

    return backtracking(s.toCharArray(), m);
}

/**
 * Backtracking with hash map.
 * Iterate string and find a flip action. Keep backtracking.
 * If given string contains a &quot;++&quot; (for flip) and later backtracking shows no other flips, then current player wins.
 *
 * @param arr given string converted to char array
 * @param m   hash map
 * @return if first player can win based on current string
 */
private boolean backtracking(char[] arr, HashMap&lt;String, Boolean&gt; m) {

    for (int i = 1; i &lt; arr.length; i++) {
        if (arr[i] == '+' &amp;&amp; arr[i - 1] == '+') {

            arr[i] = '-';       // flip
            arr[i - 1] = '-';

            boolean b;
            String key = String.valueOf(arr);

            if (!m.containsKey(key)) {
                b = backtracking(arr, m);
                m.put(key, b);
            } else {
                b = m.get(key);
            }

            arr[i] = '+';
            arr[i - 1] = '+';

            if (!b) {         // if next player lose, then current player wins
                return true;  // then current player wins
            }
        }
    }
    return false;
}
</code></pre>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://yyzhou95.github.io/tags/backtracking/">Backtracking</a>

  <a class="tag tag--primary tag--small" href="https://yyzhou95.github.io/tags/hashmap/hashset/">HashMap/HashSet</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/swap-or-reverse-linked-list/" data-tooltip="Swap or Reverse Linked List">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/combinations/" data-tooltip="Combinations">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Steve Zhou. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/swap-or-reverse-linked-list/" data-tooltip="Swap or Reverse Linked List">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/combinations/" data-tooltip="Combinations">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Steve Zhou</h4>
    
      <div id="about-card-bio">Bingo!</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Los Angeles
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://yyzhou95.github.io/img/bg.jpeg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://yyzhou95.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

