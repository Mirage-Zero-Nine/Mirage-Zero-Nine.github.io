<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.57.2 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="Steve Zhou">
<meta name="keywords" content="">
<meta name="description" content="">


<meta property="og:description" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Sliding Window by Counting Character">
<meta name="twitter:title" content="Sliding Window by Counting Character">
<meta property="og:url" content="https://yyzhou95.github.io/2019/08/sliding-window-by-counting-character/">
<meta property="twitter:url" content="https://yyzhou95.github.io/2019/08/sliding-window-by-counting-character/">
<meta property="og:site_name" content="Bingo!">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2019-08-11T00:00:00">
  
  
    <meta property="article:modified_time" content="2019-08-11T00:00:00">
  
  
  
    
      <meta property="article:section" content="Algorithm">
    
      <meta property="article:section" content="Problem Set">
    
  
  
    
      <meta property="article:tag" content="Sliding Window">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://yyzhou95.github.io/img/avatar.jpg">
  <meta property="twitter:image" content="https://yyzhou95.github.io/img/avatar.jpg">


    <title>Sliding Window by Counting Character</title>

    <link rel="icon" href="https://yyzhou95.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://yyzhou95.github.io/2019/08/sliding-window-by-counting-character/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://yyzhou95.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://yyzhou95.github.io/css/about.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://yyzhou95.github.io/">Bingo!</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://yyzhou95.github.io/about">
    
    
    
      
        <img class="header-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://yyzhou95.github.io/about">
          <img class="sidebar-profile-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Steve Zhou</h4>
        
          <h5 class="sidebar-profile-bio">Bingo!</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/categories/algorithm/">
    
      <i class="sidebar-button-icon fa fa-lg fa-flag-o"></i>
      
      <span class="sidebar-button-desc">Algorithm</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/categories/notes/">
    
      <i class="sidebar-button-icon fa fa-lg fa-sticky-note"></i>
      
      <span class="sidebar-button-desc">Notebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yyzhou95" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yyzhou95.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yyzhou95/yyzhou95.github.io" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-link"></i>
      
      <span class="sidebar-button-desc">Source Code</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Sliding Window by Counting Character
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-08-11T00:00:00Z">
        
  August 11, 2019

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://yyzhou95.github.io/categories/algorithm">Algorithm</a>, 
    
      <a class="category-link" href="https://yyzhou95.github.io/categories/problem-set">Problem Set</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
<ul>
<li><a href="#problem-description">Problem description</a>
<ul>
<li><a href="#longest-repeating-character-replacement">Longest Repeating Character Replacement</a></li>
<li><a href="#swap-for-longest-repeated-character-substring">Swap For Longest Repeated Character Substring</a></li>
</ul></li>
<li><a href="#method">Method</a>
<ul>
<li><a href="#longest-repeating-character-replacement-1">Longest Repeating Character Replacement</a></li>
<li><a href="#swap-for-longest-repeated-character-substring-1">Swap For Longest Repeated Character Substring</a></li>
</ul></li>
<li><a href="#code">Code</a>
<ul>
<li><a href="#longest-repeating-character-replacement-2">Longest Repeating Character Replacement</a></li>
<li><a href="#swap-for-longest-repeated-character-substring-2">Swap For Longest Repeated Character Substring</a></li>
</ul></li>
</ul>
</nav>

<p>Links:</p>

<ul>
<li><a href="https://leetcode.com/problems/longest-repeating-character-replacement">Longest Repeating Character Replacement</a></li>
<li><a href="https://leetcode.com/problems/swap-for-longest-repeated-character-substring/">Swap For Longest Repeated Character Substring</a></li>
</ul>

<h1 id="problem-description">Problem description</h1>

<h2 id="longest-repeating-character-replacement">Longest Repeating Character Replacement</h2>

<p>Given a string that consists of only uppercase English letters, you can replace any letter in the string with another letter at most <em>k</em> times. Find the length of a longest substring containing all repeating letters you can get after performing the above operations.</p>

<p><strong>Note:</strong>
Both the string&rsquo;s length and <em>k</em> will not exceed 104.</p>

<p><strong>Example 1:</strong></p>

<pre><code>Input:
s = &quot;ABAB&quot;, k = 2

Output:
4

Explanation:
Replace the two 'A's with two 'B's or vice versa.
</code></pre>

<p><strong>Example 2:</strong></p>

<pre><code>Input:
s = &quot;AABABBA&quot;, k = 1

Output:
4

Explanation:
Replace the one 'A' in the middle with 'B' and form &quot;AABBBBA&quot;.
The substring &quot;BBBB&quot; has the longest repeating letters, which is 4.
</code></pre>

<h2 id="swap-for-longest-repeated-character-substring">Swap For Longest Repeated Character Substring</h2>

<p>Given a string <code>text</code>, we are allowed to swap two of the characters in the string. Find the length of the longest substring with repeated characters.</p>

<p><strong>Example 1:</strong></p>

<pre><code>Input: text = &quot;ababa&quot;
Output: 3
Explanation: We can swap the first 'b' with the last 'a', or the last 'b' with the first 'a'. Then, the longest repeated character substring is &quot;aaa&quot;, which its length is 3.
</code></pre>

<p><strong>Example 2:</strong></p>

<pre><code>Input: text = &quot;aaabaaa&quot;
Output: 6
Explanation: Swap 'b' with the last 'a' (or the first 'a'), and we get longest repeated character substring &quot;aaaaaa&quot;, which its length is 6.
</code></pre>

<p><strong>Example 3:</strong></p>

<pre><code>Input: text = &quot;aaabbaaa&quot;
Output: 4
</code></pre>

<p><strong>Example 4:</strong></p>

<pre><code>Input: text = &quot;aaaaa&quot;
Output: 5
Explanation: No need to swap, longest repeated character substring is &quot;aaaaa&quot;, length is 5.
</code></pre>

<p><strong>Example 5:</strong></p>

<pre><code>Input: text = &quot;abcdef&quot;
Output: 1
</code></pre>

<p><strong>Constraints:</strong></p>

<ul>
<li><code>1 &lt;= text.length &lt;= 20000</code></li>
<li><code>text</code> consist of lowercase English characters only.</li>
</ul>

<h1 id="method">Method</h1>

<h2 id="longest-repeating-character-replacement-1">Longest Repeating Character Replacement</h2>

<p>This is a typical sliding window problem. The window is made up by k and the most duplicated char in array.</p>

<p>Start at beginning, the window size is 1, which only contains first char. With the traverse continuing, more chars added to array. When current substring has more different char that beyond the operation limit, reduce the substring size until it fills the max window size.</p>

<p>During the reduce process, the count of same char should be considered, otherwise, the max count of most duplicated char will be included in a substring that contains different chars exceed limit of replace operation.</p>

<h2 id="swap-for-longest-repeated-character-substring-1">Swap For Longest Repeated Character Substring</h2>

<p>Sliding window. First traverse the whole string to count each char appearance. Then traverse the string again, each time find the max window starting at current char.</p>

<p>The max possible window is the char occurred time in string.</p>

<p>Since there is only one swap is allowed, the window should stop extending when find a different char.</p>

<h1 id="code">Code</h1>

<h2 id="longest-repeating-character-replacement-2">Longest Repeating Character Replacement</h2>

<pre><code class="language-java">/**
 * Sliding window.
 * The window can only extend its size when the count of the new char exceeds the historical max count.
 * Therefore, count each char's appearance during the traverse.
 * Only consider if the max count exceeds the historical max count.
 *
 * @param s given string
 * @param k limit of replacing operations
 * @return longest substring containing all repeating letters
 */
public int characterReplacement(String s, int k) {

    /* Corner case */
    if (s.length() &lt; 1) {
        return 0;
    }
    if (k &gt; s.length()) {       // directly replace all char in string
        return s.length();
    }

    int[] count = new int[26];      // store char appearance
    int max = 0, window = 0, start = 0;

    for (int i = 0; i &lt; s.length(); i++) {

        /*
         * During traverse, the max possible window is the most occurred char + k.
         * k is the largest possible replacement. And the char count is under current window size.
         * The initially window size is 1. To extend the window size, there are two conditions:
         * 1. There are replacement left for different char.
         * 2. Find a new char that is either the current most occurred char, or new max count.
         * If window size is larger than max possible size (max char + k), then the window size should be narrowed.
         * When narrowing the window size, reduce char count that will be excluded from window . */
        max = Math.max(max, ++count[s.charAt(i) - 'A']);    // resize window if new max count found
        while (i - start + 1 &gt; k + max) {                   // narrow window
            count[s.charAt(start++) - 'A']--;               // remove char that is excluded from window
        }
        window = Math.max(window, i - start + 1);           // find max window size
    }

    return window;
}
</code></pre>

<h2 id="swap-for-longest-repeated-character-substring-2">Swap For Longest Repeated Character Substring</h2>

<pre><code class="language-java">/**
 * Sliding window. First traverse the whole string to count each char appearance.
 * The traverse the string again, each time find the max window starting at current char.
 * The max possible window is the char occurred time in string.
 * Since there is only one swap is allowed, the window should stop extending when find a different char.
 *
 * @param s given string
 * @return length of the longest substring with repeated characters
 */
public int maxRepOpt1_1156(String s) {

    /* Corner case */
    if (s.length() &lt; 1) {
        return 0;
    }

    int n = s.length();
    int[] arr = new int[26];
    for (int i = 0; i &lt; n; i++) {
        arr[s.charAt(i) - 'a']++;       // count char appearance
    }

    int max = 0;
    for (int i = 0; i &lt; n; i++) {
        int j = i, window = 0;      // each time, reset the window
        boolean canContinue = true;

        /*
         * Each time, reset the window and find the longest substring starting at current char.
         * Window can extend only when these conditions are fulfilled:
         * 1. At most one different char (compare to s.charAt(i)) is found.
         * 2. Window size is larger than s.charAt(i) occurrence. */
        while (j &lt; s.length() &amp;&amp; (s.charAt(i) == s.charAt(j) || canContinue) &amp;&amp; window &lt; arr[s.charAt(i) - 'a']) {
            if (s.charAt(j++) != s.charAt(i)) {       // found a different char, swap and end window extension
                canContinue = false;
            }
            window++;
        }
        max = Math.max(max, window);
    }

    return max;
}
</code></pre>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://yyzhou95.github.io/tags/sliding-window/">Sliding Window</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/online-majority-element-in-subarray/" data-tooltip="Online Majority Element In Subarray">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/longest-repeating-substring/" data-tooltip="Longest Repeating Substring">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 <a href="https://github.com/yyzhou95">BorisMirage</a>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/online-majority-element-in-subarray/" data-tooltip="Online Majority Element In Subarray">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yyzhou95.github.io/2019/08/longest-repeating-substring/" data-tooltip="Longest Repeating Substring">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://yyzhou95.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Steve Zhou</h4>
    
      <div id="about-card-bio">Bingo!</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Los Angeles
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://yyzhou95.github.io/img/bg.jpeg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://yyzhou95.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

