<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.68.1 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="Notebook">
<meta name="keywords" content="">
<meta name="description" content="">


<meta property="og:description" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="LC 253 218 - Intervals II">
<meta name="twitter:title" content="LC 253 218 - Intervals II">
<meta property="og:url" content="https://yy-zhou.github.io/2020/02/lc-253-218-intervals-ii/">
<meta property="twitter:url" content="https://yy-zhou.github.io/2020/02/lc-253-218-intervals-ii/">
<meta property="og:site_name" content="Bingo!">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2020-02-17T00:00:00">
  
  
    <meta property="article:modified_time" content="2020-02-17T00:00:00">
  
  
  
    
      <meta property="article:section" content="Comparator">
    
      <meta property="article:section" content="Heap">
    
      <meta property="article:section" content="Interval">
    
      <meta property="article:section" content="Sorting">
    
  
  
    
      <meta property="article:tag" content="TreeMap/TreeSet">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://yy-zhou.github.io/img/avatar.jpg">
  <meta property="twitter:image" content="https://yy-zhou.github.io/img/avatar.jpg">


    <title>LC 253 218 - Intervals II</title>

    <link rel="icon" href="https://yy-zhou.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://yy-zhou.github.io/2020/02/lc-253-218-intervals-ii/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://yy-zhou.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://yy-zhou.github.io/css/about.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://yy-zhou.github.io/">Bingo!</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://yy-zhou.github.io/about">
    
    
    
      
        <img class="header-picture" src="https://yy-zhou.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://yy-zhou.github.io/about">
          <img class="sidebar-profile-picture" src="https://yy-zhou.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Notebook</h4>
        
          <h5 class="sidebar-profile-bio">Bingo!</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yy-zhou.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yy-zhou.github.io/categories/notes/">
    
      <i class="sidebar-button-icon fa fa-lg fa-sticky-note"></i>
      
      <span class="sidebar-button-desc">Notebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yy-zhou.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yy-zhou.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yy-zhou.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yy-zhou" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yy-zhou.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yyzhou95/yyzhou95.github.io" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-link"></i>
      
      <span class="sidebar-button-desc">Source Code</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="2"
        class="
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      LC 253 218 - Intervals II
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2020-02-17T00:00:00Z">
        
  February 17, 2020

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://yy-zhou.github.io/categories/comparator">Comparator</a>, 
    
      <a class="category-link" href="https://yy-zhou.github.io/categories/heap">Heap</a>, 
    
      <a class="category-link" href="https://yy-zhou.github.io/categories/interval">Interval</a>, 
    
      <a class="category-link" href="https://yy-zhou.github.io/categories/sorting">Sorting</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
  <ul>
    <li><a href="#meeting-rooms-ii">Meeting Rooms II</a>
      <ul>
        <li><a href="#problem-description">Problem description</a></li>
        <li><a href="#method--code">Method &amp; Code</a>
          <ul>
            <li><a href="#time-point">Time Point</a></li>
            <li><a href="#heap">Heap</a></li>
            <li><a href="#two-pointers">Two Pointers</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#the-skyline-problem">The Skyline Problem</a>
      <ul>
        <li><a href="#problem-description-1">Problem description</a></li>
        <li><a href="#method--code-1">Method &amp; Code</a>
          <ul>
            <li><a href="#tree-set">Tree Set</a></li>
            <li><a href="#max-heap-with-point">Max Heap with Point</a></li>
            <li><a href="#max-heap-with-treemap">Max Heap with TreeMap</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
<h1 id="meeting-rooms-ii">Meeting Rooms II</h1>
<p>Link: <a href="https://leetcode.com/problems/meeting-rooms-ii/">Meeting Rooms II</a></p>
<h2 id="problem-description">Problem description</h2>
<p>Given an array of meeting time intervals consisting of start and end times <code>[[s1,e1],[s2,e2],...], (si &lt; ei)</code>, find the minimum number of conference rooms required.</p>
<p><strong>Example 1:</strong></p>
<pre><code>Input: [[0, 30],[5, 10],[15, 20]]
Output: 2
</code></pre><p><strong>Example 2:</strong></p>
<pre><code>Input: [[7,10],[2,4]]
Output: 1
</code></pre><h2 id="method--code">Method &amp; Code</h2>
<p>Three solutions: use a self-defined <code>Point</code>, or use heap, or use two pointers</p>
<h3 id="time-point">Time Point</h3>
<p>Define a &ldquo;time point&rdquo; to represent each meeting&rsquo;s start and end time. Then sort the list that contains all time points of meeting.</p>
<p>Iterate all points in list. If there is continues start point, then there is overlap. Otherwise, one meeting is over and the room is cleaned for next meeting (see comparator for details).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Define a &#34;time point&#34; to represent each meeting&#39;s start and end time.
</span><span style="color:#75715e"> * Then sort the list that contains all time points of meeting.
</span><span style="color:#75715e"> * Iterate all points in list. If there is continues start point, then there is overlap.
</span><span style="color:#75715e"> * Otherwise, one meeting is over and the room is cleaned for next meeting (see comparator for details).
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param intervals given time interval
</span><span style="color:#75715e"> * @return minimum non-overlapped number
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">minMeetingRooms</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> intervals<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/* Corner case */</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>intervals <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> list <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> i <span style="color:#f92672">:</span> intervals<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        list<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Point<span style="color:#f92672">(</span>i<span style="color:#f92672">[</span>0<span style="color:#f92672">],</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">));</span>
        list<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Point<span style="color:#f92672">(</span>i<span style="color:#f92672">[</span>1<span style="color:#f92672">],</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

    Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>list<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> max <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Point p <span style="color:#f92672">:</span> list<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>     <span style="color:#75715e">// there is overlap
</span><span style="color:#75715e"></span>            count<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>            <span style="color:#75715e">// one meeting is over, no overlap here
</span><span style="color:#75715e"></span>            count<span style="color:#f92672">--;</span>
        <span style="color:#f92672">}</span>

        max <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">max</span><span style="color:#f92672">(</span>max<span style="color:#f92672">,</span> count<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> max<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * Point that represent each time stamp.
</span><span style="color:#75715e"> * Each point has following fields:
</span><span style="color:#75715e"> * val: time of current point.
</span><span style="color:#75715e"> * isEnd: is current time a end time.
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> <span style="color:#66d9ef">implements</span> Comparable<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> val<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">boolean</span> isEnd<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Constructor of time point.
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param val   time of current point
</span><span style="color:#75715e">     * @param isEnd is current time a end time
</span><span style="color:#75715e">     */</span>
    Point<span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> val<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> isEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">=</span> val<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">=</span> isEnd<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Compare two points.
</span><span style="color:#75715e">     * If they have different time, then point with earlier time has higher priority.
</span><span style="color:#75715e">     * Otherwise, end point has higher priority.
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param p other point
</span><span style="color:#75715e">     * @return -1, 0, or 1 as the first argument is less than, equal to, or greater than the second
</span><span style="color:#75715e">     */</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>Point p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">!=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">-</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">?</span> <span style="color:#f92672">-</span>1 <span style="color:#f92672">:</span> 1<span style="color:#f92672">;</span>     <span style="color:#75715e">// if identical end time is considered as overlap, the order should be reversed
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="heap">Heap</h3>
<p>Since it is only the end time conflict that requires one more room, therefore, use a heap to save ending time. They are several cases:</p>
<ol>
<li>Heap is empty.</li>
<li>Two intervals has same start</li>
<li>Interval ends with a time smaller than top of heap (start before the other end).</li>
<li>Interval ends with a time larger than top of heap (start after the end).</li>
<li>Interval ends with a time smaller than top of heap.</li>
</ol>
<p>For situation 1,2,3, add current interval end to heap and one more room is required.</p>
<p>For situation 4, their is no conflict, hence add the end time to heap.</p>
<p>For situation 5, assume no extra room is required, continue, do nothing.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Solution II.
</span><span style="color:#75715e"> * Since it is only the end time conflict that requires one more room, therefore, use a heap to save ending time.
</span><span style="color:#75715e"> * They are several cases:
</span><span style="color:#75715e"> * 1. Heap is empty
</span><span style="color:#75715e"> * 2. Two intervals has same start
</span><span style="color:#75715e"> * 3. Interval ends with a time smaller than top of heap (start before the other end)
</span><span style="color:#75715e"> * 4. Interval ends with a time larger than top of heap (start after the end)
</span><span style="color:#75715e"> * 5. Interval ends with a time smaller than top of heap
</span><span style="color:#75715e"> * For situation 1,2,3, add current interval end to heap and one more room is required.
</span><span style="color:#75715e"> * For situation 4, their is no conflict, hence add the end time to heap.
</span><span style="color:#75715e"> * For situation 5, assume no extra room is required, continue, do nothing.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param intervals given time interval
</span><span style="color:#75715e"> * @return minimum non-overlapped number
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">heap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> intervals<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/* Corner case */</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">?</span> 0 <span style="color:#f92672">:</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>intervals<span style="color:#f92672">,</span> Comparator<span style="color:#f92672">.</span><span style="color:#a6e22e">comparingInt</span><span style="color:#f92672">(</span>i <span style="color:#f92672">-&gt;</span> i<span style="color:#f92672">[</span>0<span style="color:#f92672">]));</span>     <span style="color:#75715e">// sort based on intervals[i][0]
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    PriorityQueue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> q <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PriorityQueue<span style="color:#f92672">&lt;&gt;();</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>q<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> intervals<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> q<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> intervals<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> intervals<span style="color:#f92672">[</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">][</span>0<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            q<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>intervals<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>1<span style="color:#f92672">]);</span>
            count<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>intervals<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> q<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            q<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            q<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>intervals<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>1<span style="color:#f92672">]);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> count<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="two-pointers">Two Pointers</h3>
<p>Sort start time and end time separately. Then one pointer point at start time, one point at end time.</p>
<ul>
<li>If <code>start time &lt; end time</code>, then one more room is required.</li>
<li>Otherwise, there is no conflict, move end time pointer forward.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Solution III.
</span><span style="color:#75715e"> * Sort start time and end time separately.
</span><span style="color:#75715e"> * Then one pointer point at start time, one point at end time.
</span><span style="color:#75715e"> * If start time &lt; end time, then one more room is required.
</span><span style="color:#75715e"> * Otherwise, there is no conflict, move end time pointer forward.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param intervals given time interval
</span><span style="color:#75715e"> * @return minimum non-overlapped number
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">twoPointers</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> intervals<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> starts <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> ends <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> intervals<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        starts<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> intervals<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>0<span style="color:#f92672">];</span>
        ends<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> intervals<span style="color:#f92672">[</span>i<span style="color:#f92672">][</span>1<span style="color:#f92672">];</span>
    <span style="color:#f92672">}</span>

    Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>starts<span style="color:#f92672">);</span>
    Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>ends<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> rooms <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> end <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> start <span style="color:#f92672">:</span> starts<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>start <span style="color:#f92672">&lt;</span> ends<span style="color:#f92672">[</span>end<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            rooms<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            end<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> rooms<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h1 id="the-skyline-problem">The Skyline Problem</h1>
<p>Link: <a href="https://leetcode.com/problems/the-skyline-problem/">The Skyline Problem</a></p>
<h2 id="problem-description-1">Problem description</h2>
<p>A city&rsquo;s skyline is the outer contour of the silhouette formed by all the buildings in that city when viewed from a distance. Now suppose you are <strong>given the locations and height of all the buildings</strong> as shown on a cityscape photo (Figure A), write a program to <strong>output the skyline</strong> formed by these buildings collectively (Figure B).</p>
<p><img src="../../../img/skyline1.png" alt="Buildings"></p>
<p>For instance, the dimensions of all buildings in Figure A are recorded as: <code>[ [2 9 10], [3 7 15], [5 12 12], [15 20 10], [19 24 8] ] </code>.</p>
<p>The output is a list of &ldquo;<strong>key points</strong>&rdquo; (red dots in Figure B) in the format of <code>[ [x1,y1], [x2, y2], [x3, y3], ... ]</code>that uniquely defines a skyline. <strong>A key point is the left endpoint of a horizontal line segment</strong>. Note that the last key point, where the rightmost building ends, is merely used to mark the termination of the skyline, and always has zero height. Also, the ground in between any two adjacent buildings should be considered part of the skyline contour.</p>
<p>For instance, the skyline in Figure B should be represented as:<code>[ [2 10], [3 15], [7 12], [12 0], [15 10], [20 8], [24, 0] ]</code>.</p>
<p><strong>Notes:</strong></p>
<ul>
<li>The number of buildings in any input list is guaranteed to be in the range <code>[0, 10000]</code>.</li>
<li>The input list is already sorted in ascending order by the left x position <code>Li</code>.</li>
<li>The output list must be sorted by the x position.</li>
<li>There must be no consecutive horizontal lines of equal height in the output skyline. For instance, <code>[...[2 3], [4 5], [7 5], [11 5], [12 7]...]</code> is not acceptable; the three lines of height 5 should be merged into one in the final output as such: <code>[...[2 3], [4 5], [12 7], ...]</code></li>
</ul>
<h2 id="method--code-1">Method &amp; Code</h2>
<p>Two approaches: tree set with point or max heap with point. The tree set solution is better, since it takes less time.</p>
<p>One other approach is to mark height to negative value for prior point representing each building. The rest of idea is similar.</p>
<h3 id="tree-set">Tree Set</h3>
<p>Solution with tree set. Remove in tree set is <code>O(logn)</code>.</p>
<p>Use two lists. One list stores all points representing building. Sort this list based on point priority. The other list all building&rsquo;s start and height. This list will not be sorted.</p>
<p>Then iterate all points in first list. Use a tree set to find the highest building.</p>
<p>There are two conditions of current point.</p>
<p>First, <strong>current point is a left edge</strong>:</p>
<ul>
<li>If set is empty, then current left edge is beginning of new building and a new key points is found.</li>
<li>If set is not empty, check if current edge is highest. If so, then a new key point is found.</li>
</ul>
<p>Otherwise, <strong>current point is a right edge</strong>:</p>
<ul>
<li>If set is empty, then current point is the last point of current building.</li>
<li>Otherwise, check if current edge is highest. At right edge, the lower point is the new key point.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Solution with tree set. Remove in tree set is O(logn).
</span><span style="color:#75715e"> * Use two lists. One list stores all points representing building. Sort this list based on point priority.
</span><span style="color:#75715e"> * The other list all building&#39;s start and height. This list will not be sorted.
</span><span style="color:#75715e"> * Then iterate all points in first list. Use a tree set to find the highest building.
</span><span style="color:#75715e"> * First, current point is a left edge:
</span><span style="color:#75715e"> * If set is empty, then current left edge is beginning of new building and a new key points is found.
</span><span style="color:#75715e"> * If set is not empty, check if current edge is highest. If so, then a new key point is found.
</span><span style="color:#75715e"> * Otherwise, current point is a right edge:
</span><span style="color:#75715e"> * If set is empty, then current point is the last point of current building.
</span><span style="color:#75715e"> * Otherwise, check if current edge is highest. At right edge, the lower point is the new key point.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param buildings given buildings list
</span><span style="color:#75715e"> * @return skyline formed by these buildings collectively
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">getSkyline</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> buildings<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>

    <span style="color:#75715e">/* Corner case */</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>buildings <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> buildings<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0 <span style="color:#f92672">||</span> buildings<span style="color:#f92672">[</span>0<span style="color:#f92672">].</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> out<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    List<span style="color:#f92672">&lt;</span>PointWithIndex<span style="color:#f92672">&gt;</span> leftEdge <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;(),</span> points <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> buildings<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> b <span style="color:#f92672">=</span> buildings<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
        points<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> PointWithIndex<span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>0<span style="color:#f92672">],</span> b<span style="color:#f92672">[</span>2<span style="color:#f92672">],</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> i<span style="color:#f92672">));</span>
        points<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> PointWithIndex<span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">],</span> b<span style="color:#f92672">[</span>2<span style="color:#f92672">],</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> i<span style="color:#f92672">));</span>
        leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> PointWithIndex<span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>0<span style="color:#f92672">],</span> b<span style="color:#f92672">[</span>2<span style="color:#f92672">],</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> i<span style="color:#f92672">));</span>
    <span style="color:#f92672">}</span>

    Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>points<span style="color:#f92672">);</span>        <span style="color:#75715e">// sort all points
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">/*
</span><span style="color:#75715e">     * Create a new comparator to find highest building in tree set.
</span><span style="color:#75715e">     * If points have different height, then higher point has higher priority.
</span><span style="color:#75715e">     * Otherwise, prior point has higher priority. */</span>
    TreeSet<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> ts <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeSet<span style="color:#f92672">&lt;&gt;((</span>a<span style="color:#f92672">,</span> b<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>a<span style="color:#f92672">).</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">!=</span> leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>b<span style="color:#f92672">).</span><span style="color:#a6e22e">height</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>b<span style="color:#f92672">).</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">-</span> leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>a<span style="color:#f92672">).</span><span style="color:#a6e22e">height</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> a <span style="color:#f92672">-</span> b<span style="color:#f92672">;</span>
    <span style="color:#f92672">});</span>

<span style="color:#75715e">//        Comparator&lt;Integer&gt; comparator = (a, b) -&gt;
</span><span style="color:#75715e">//                leftEdge.get(a).height != leftEdge.get(b).height ?
</span><span style="color:#75715e">//                        Integer.compare(leftEdge.get(b).height, leftEdge.get(a).height) :
</span><span style="color:#75715e">//                        a - b;
</span><span style="color:#75715e">//        TreeSet&lt;Integer&gt; ts = new TreeSet&lt;&gt;(comparator);
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>PointWithIndex p <span style="color:#f92672">:</span> points<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ArrayList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> tmp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// left edge
</span><span style="color:#75715e"></span>
            <span style="color:#75715e">/*
</span><span style="color:#75715e">             * If set is empty, then current left edge is beginning of new building and a new key points is found.
</span><span style="color:#75715e">             * If set is not empty, check if current edge is highest. If so, then a new key point is found. */</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ts<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">&gt;</span> leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>ts<span style="color:#f92672">.</span><span style="color:#a6e22e">first</span><span style="color:#f92672">()).</span><span style="color:#a6e22e">height</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">);</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">);</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>tmp<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            ts<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">index</span><span style="color:#f92672">);</span>    <span style="color:#75715e">// the overrode comparator will compare height first
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>                <span style="color:#75715e">// right edge
</span><span style="color:#75715e"></span>            ts<span style="color:#f92672">.</span><span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">index</span><span style="color:#f92672">);</span>        <span style="color:#75715e">// right edge, no more current building, remove the building point from set
</span><span style="color:#75715e"></span>
            <span style="color:#75715e">/*
</span><span style="color:#75715e">             * If set is empty, then current point is the last point of current building.
</span><span style="color:#75715e">             * Otherwise, check if current edge is highest.
</span><span style="color:#75715e">             * In this situation, the lower point is the new key point. */</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ts<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">&gt;</span> leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>ts<span style="color:#f92672">.</span><span style="color:#a6e22e">first</span><span style="color:#f92672">()).</span><span style="color:#a6e22e">height</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">);</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>ts<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">?</span> 0 <span style="color:#f92672">:</span> leftEdge<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>ts<span style="color:#f92672">.</span><span style="color:#a6e22e">first</span><span style="color:#f92672">()).</span><span style="color:#a6e22e">height</span><span style="color:#f92672">);</span>        <span style="color:#75715e">// last point has 0 height
</span><span style="color:#75715e"></span>                out<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>tmp<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> out<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * Point of building with height and mark if current point is build end.
</span><span style="color:#75715e"> * Also, the point has index field, which represent the order of building this point belongs to.
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PointWithIndex</span> <span style="color:#66d9ef">implements</span> Comparable<span style="color:#f92672">&lt;</span>PointWithIndex<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> x<span style="color:#f92672">,</span> height<span style="color:#f92672">,</span> index<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">boolean</span> isEnd<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Constructor of point with index.
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param x      point x coord
</span><span style="color:#75715e">     * @param height height of current point
</span><span style="color:#75715e">     * @param isEnd  is current point the end of building
</span><span style="color:#75715e">     * @param index  position of building
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PointWithIndex</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> height<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> isEnd<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> x<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> height<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">=</span> isEnd<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> index<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Priority:
</span><span style="color:#75715e">     * 1. If point has different position, smaller one has higher priority.
</span><span style="color:#75715e">     * 2. If both points are left edges, find higher one.
</span><span style="color:#75715e">     * 3. If both points are right edge, find lower one.
</span><span style="color:#75715e">     * 4. Otherwise, one left edge and one right edge, find left one.
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param that the other point with index
</span><span style="color:#75715e">     * @return priority
</span><span style="color:#75715e">     */</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>PointWithIndex that<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">;</span>     <span style="color:#75715e">// smaller index has higher priority
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>that<span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>       <span style="color:#75715e">// both left edges: find higher one
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">&amp;&amp;</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>      <span style="color:#75715e">// both right edges: find lower one
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">-</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// one left edge and one right edge: find left edge
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="max-heap-with-point">Max Heap with Point</h3>
<p>Solution with max heap. The idea is almost same. However, remove element in heap is O(n), which is slower than remove element in tree set.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Solution with max heap. The idea is almost same.
</span><span style="color:#75715e"> * However, remove element in heap is O(n), which is slower than remove element in tree set.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param buildings given buildings list
</span><span style="color:#75715e"> * @return skyline formed by these buildings collectively
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">maxHeap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> buildings<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>

    <span style="color:#75715e">/* Corner case */</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>buildings <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> buildings<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0 <span style="color:#f92672">||</span> buildings<span style="color:#f92672">[</span>0<span style="color:#f92672">].</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> out<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    List<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> points <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> b <span style="color:#f92672">:</span> buildings<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        points<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Point<span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>0<span style="color:#f92672">],</span> b<span style="color:#f92672">[</span>2<span style="color:#f92672">],</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">));</span>      <span style="color:#75715e">// add start point and its height
</span><span style="color:#75715e"></span>        points<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Point<span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">],</span> b<span style="color:#f92672">[</span>2<span style="color:#f92672">],</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">));</span>     <span style="color:#75715e">// add end point and its height
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>points<span style="color:#f92672">);</span>
    Queue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> maxHeap <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PriorityQueue<span style="color:#f92672">&lt;&gt;(</span>buildings<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> Comparator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compare</span><span style="color:#f92672">(</span>Integer o1<span style="color:#f92672">,</span> Integer o2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> o2 <span style="color:#f92672">-</span> o1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">});</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Point ep <span style="color:#f92672">:</span> points<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>ep<span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> ep<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">&gt;</span> maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                ArrayList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> tmp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>ep<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">);</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>ep<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">);</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>tmp<span style="color:#f92672">);</span>
<span style="color:#75715e">//                    out.add(new ArrayList&lt;Integer&gt;() {{
</span><span style="color:#75715e">//                        add(ep.x);
</span><span style="color:#75715e">//                        add(ep.height);
</span><span style="color:#75715e">//                    }});
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
            maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>ep<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">);</span>       <span style="color:#75715e">// current height
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span>ep<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">);</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">||</span> ep<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">&gt;</span> maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                ArrayList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> tmp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>ep<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">);</span>
                tmp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">?</span> 0 <span style="color:#f92672">:</span> maxHeap<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">());</span>
                out<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>tmp<span style="color:#f92672">);</span>
<span style="color:#75715e">//                    out.add(new ArrayList&lt;Integer&gt;() {{
</span><span style="color:#75715e">//                        add(ep.x);
</span><span style="color:#75715e">//                        add(maxHeap.isEmpty() ? 0 : maxHeap.peek());
</span><span style="color:#75715e">//                    }});
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> out<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * Point of building with height and mark if current point is build end.
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> <span style="color:#66d9ef">implements</span> Comparable<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> x<span style="color:#f92672">,</span> height<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">boolean</span> isEnd<span style="color:#f92672">;</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Constructor of point.
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param x      point x coord
</span><span style="color:#75715e">     * @param height height of current point
</span><span style="color:#75715e">     * @param isEnd  is current point the end of building
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Point</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> height<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> isEnd<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> x<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> height<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">=</span> isEnd<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Priority:
</span><span style="color:#75715e">     * 1. If point has different position, smaller one has higher priority.
</span><span style="color:#75715e">     * 2. If both points are left edges, find higher one.
</span><span style="color:#75715e">     * 3. If both points are right edge, find lower one.
</span><span style="color:#75715e">     * 4. Otherwise, one left edge and one right edge, find left one.
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param that the other point with index
</span><span style="color:#75715e">     * @return priority
</span><span style="color:#75715e">     */</span>
    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>Point that<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">!=</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>                     <span style="color:#75715e">// smaller index has higher priority
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">x</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>that<span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>       <span style="color:#75715e">// both left edges: find higher one
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">&amp;&amp;</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>      <span style="color:#75715e">// both right edges: find lower one
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">height</span> <span style="color:#f92672">-</span> that<span style="color:#f92672">.</span><span style="color:#a6e22e">height</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// one left edge and one right edge: find left edge
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isEnd</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="max-heap-with-treemap">Max Heap with TreeMap</h3>
<p>Use a heap and tree map to sort the given coord. The idea is similar. However, it uses negative number to mark left edge&rsquo;s height. In this way to reduce boolean mark.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Use a heap and tree map to sort the given coord. The idea is similar.
</span><span style="color:#75715e"> * However, it uses negative number to mark left edge&#39;s height. In this way to reduce boolean mark.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param buildings given buildings list
</span><span style="color:#75715e"> * @return skyline formed by these buildings collectively
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> <span style="color:#a6e22e">heap</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[][]</span> buildings<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    List<span style="color:#f92672">&lt;</span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;&gt;</span> out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>
    List<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]&gt;</span> height <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;&gt;();</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> b <span style="color:#f92672">:</span> buildings<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        height<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>b<span style="color:#f92672">[</span>0<span style="color:#f92672">],</span> <span style="color:#f92672">-</span>b<span style="color:#f92672">[</span>2<span style="color:#f92672">]});</span>     <span style="color:#75715e">// incomplete height marked as negative
</span><span style="color:#75715e"></span>        height<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">],</span> b<span style="color:#f92672">[</span>2<span style="color:#f92672">]});</span>
    <span style="color:#f92672">}</span>

    height<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Comparator<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]&gt;()</span> <span style="color:#f92672">{</span>
        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compare</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> b<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> b<span style="color:#f92672">[</span>0<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> a<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#f92672">-</span> b<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>     <span style="color:#75715e">// if position is same, sort by height
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">return</span> a<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">-</span> b<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>     <span style="color:#75715e">// sort the given array by position
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">});</span>

    TreeMap<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span> tm <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeMap<span style="color:#f92672">&lt;&gt;();</span>     <span style="color:#75715e">// key: height; value: how many at this height
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> previousHighest <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    tm<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> 1<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> b <span style="color:#f92672">:</span> height<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            tm<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(-</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">],</span> tm<span style="color:#f92672">.</span><span style="color:#a6e22e">getOrDefault</span><span style="color:#f92672">(-</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">],</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>tm<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">])</span> <span style="color:#f92672">&gt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                tm<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">],</span> tm<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">])</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                tm<span style="color:#f92672">.</span><span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>1<span style="color:#f92672">]);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> currentHighest <span style="color:#f92672">=</span> tm<span style="color:#f92672">.</span><span style="color:#a6e22e">lastKey</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>currentHighest <span style="color:#f92672">!=</span> previousHighest<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// if there is a new height
</span><span style="color:#75715e"></span>            previousHighest <span style="color:#f92672">=</span> currentHighest<span style="color:#f92672">;</span>
            ArrayList<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> temp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
            temp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>b<span style="color:#f92672">[</span>0<span style="color:#f92672">]);</span>
            temp<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>currentHighest<span style="color:#f92672">);</span>
            out<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>temp<span style="color:#f92672">);</span>

<span style="color:#75715e">//                out.add(new ArrayList&lt;Integer&gt;() {{
</span><span style="color:#75715e">//                    add(b[0]);
</span><span style="color:#75715e">//                    add(currentHighest);
</span><span style="color:#75715e">//                }});
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> out<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://yy-zhou.github.io/tags/treemap/treeset/">TreeMap/TreeSet</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yy-zhou.github.io/2020/02/lc-35-658-find-insert-position-in-sorted-array/" data-tooltip="LC 35 658 - Find Insert Position in Sorted Array">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yy-zhou.github.io/2020/02/lc-99-114-morris-traversal/" data-tooltip="LC 99 114 - Morris Traversal">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 <a href="https://github.com/yyzhou95">BorisMirage</a>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yy-zhou.github.io/2020/02/lc-35-658-find-insert-position-in-sorted-array/" data-tooltip="LC 35 658 - Find Insert Position in Sorted Array">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yy-zhou.github.io/2020/02/lc-99-114-morris-traversal/" data-tooltip="LC 99 114 - Morris Traversal">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://yy-zhou.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Notebook</h4>
    
      <div id="about-card-bio">Bingo!</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        San Jose
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://yy-zhou.github.io/img/bg.jpeg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://yy-zhou.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

