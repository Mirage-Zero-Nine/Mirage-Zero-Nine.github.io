<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.92.2 with theme Tranquilpeak 0.4.8-BETA">
<meta name="author" content="Notebook">
<meta name="keywords" content="">
<meta name="description" content="">


<meta property="og:description" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="LC 224 227 772 - Implement Calculator">
<meta name="twitter:title" content="LC 224 227 772 - Implement Calculator">
<meta property="og:url" content="https://mirage-zero-nine.github.io/2020/04/lc-224-227-772-implement-calculator/">
<meta property="twitter:url" content="https://mirage-zero-nine.github.io/2020/04/lc-224-227-772-implement-calculator/">
<meta property="og:site_name" content="Bingo!">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2020-04-07T00:00:00">
  
  
    <meta property="article:modified_time" content="2020-04-07T00:00:00">
  
  
  
    
      <meta property="article:section" content="Math">
    
      <meta property="article:section" content="Stack">
    
  
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://mirage-zero-nine.github.io/img/avatar.jpg">
  <meta property="twitter:image" content="https://mirage-zero-nine.github.io/img/avatar.jpg">


    <title>LC 224 227 772 - Implement Calculator</title>

    <link rel="icon" href="https://mirage-zero-nine.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://mirage-zero-nine.github.io/2020/04/lc-224-227-772-implement-calculator/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://mirage-zero-nine.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://mirage-zero-nine.github.io/css/about.css">
      
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://mirage-zero-nine.github.io/">Bingo!</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://mirage-zero-nine.github.io/about">
    
    
    
      
        <img class="header-picture" src="https://mirage-zero-nine.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://mirage-zero-nine.github.io/about">
          <img class="sidebar-profile-picture" src="https://mirage-zero-nine.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Notebook</h4>
        
          <h5 class="sidebar-profile-bio">Bingo!</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://mirage-zero-nine.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://mirage-zero-nine.github.io/categories/notes/">
    
      <i class="sidebar-button-icon fa fa-lg fa-sticky-note"></i>
      
      <span class="sidebar-button-desc">Notebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://mirage-zero-nine.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://mirage-zero-nine.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://mirage-zero-nine.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://mirage-zero-nine.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="2"
        class="
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      LC 224 227 772 - Implement Calculator
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2020-04-07T00:00:00Z">
        
  April 7, 2020

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://mirage-zero-nine.github.io/categories/math">Math</a>, 
    
      <a class="category-link" href="https://mirage-zero-nine.github.io/categories/stack">Stack</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
  <ul>
    <li><a href="#224-basic-calculator">224. Basic Calculator</a>
      <ul>
        <li><a href="#problem-description">Problem Description</a></li>
        <li><a href="#method--code">Method &amp; Code</a></li>
      </ul>
    </li>
    <li><a href="#227-basic-calculator-ii">227. Basic Calculator II</a>
      <ul>
        <li><a href="#problem-description-1">Problem Description</a></li>
        <li><a href="#method--code-1">Method &amp; Code</a></li>
      </ul>
    </li>
    <li><a href="#772-basic-calculator-iii">772. Basic Calculator III</a>
      <ul>
        <li><a href="#problem-description-2">Problem Description</a></li>
        <li><a href="#method--code-2">Method &amp; Code</a>
          <ul>
            <li><a href="#two-stacks">Two Stacks</a></li>
            <li><a href="#deque">Deque</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
<h1 id="224-basic-calculator">224. Basic Calculator</h1>
<p>Link: <a href="https://leetcode.com/problems/basic-calculator">Basic Calculator</a></p>
<h2 id="problem-description">Problem Description</h2>
<p>Implement a basic calculator to evaluate a simple expression string.</p>
<p>The expression string may contain open <code>(</code> and closing parentheses <code>)</code>, the plus <code>+</code> or minus sign <code>-</code>, <strong>non-negative</strong>integers and empty spaces ``.</p>
<p><strong>Example 1:</strong></p>
<pre tabindex="0"><code>Input: &quot;1 + 1&quot;
Output: 2
</code></pre><p><strong>Example 2:</strong></p>
<pre tabindex="0"><code>Input: &quot; 2-1 + 2 &quot;
Output: 3
</code></pre><p><strong>Example 3:</strong></p>
<pre tabindex="0"><code>Input: &quot;(1+(4+5+2)-3)+(6+8)&quot;
Output: 23
</code></pre><p><strong>Note:</strong></p>
<ul>
<li>You may assume that the given expression is always valid.</li>
<li><strong>Do not</strong> use the <code>eval</code> built-in library function.</li>
</ul>
<h2 id="method--code">Method &amp; Code</h2>
<p>Use a stack to store calculate result of each operator and operand. Normally, parse current integer and calculate it with previous sum and sign.</p>
<p>If reaches brackets, then consider the expression within brackets is a new expression.</p>
<ul>
<li>Push the sign before bracket pair for final evaluation for whole expression within brackets.</li>
<li>Push a new initially sum 0 into stack, since the expression within brackets is a new expression.</li>
<li>Due to sign is pushed into stack, when reaches the right part of bracket pair, three items should be popped out: current sum within bracket pair, sign of whole bracket pair, previous sum. Three items together will correctly calculate the result within bracket pair.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Use a stack to store calculate result of each operator and Operand.
</span><span style="color:#75715e"> * Pop the sum of previous calculation with each operand.
</span><span style="color:#75715e"> * If found a bracket, push a 0 to stack as an initially sum, and keep calculation.
</span><span style="color:#75715e"> * After the bracket is end, pop the previous sum in bracket and before bracket to calculate the result.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param s given expression string
</span><span style="color:#75715e"> * @return calculation result of s
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculate</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

    Stack<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Stack<span style="color:#f92672">&lt;&gt;();</span>
    stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>                          <span style="color:#75715e">// always keep most recent sum at top
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> sign <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> num <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">-</span> 1 <span style="color:#f92672">&amp;&amp;</span> Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">)))</span> <span style="color:#f92672">{</span>      <span style="color:#75715e">// calculate current numbers
</span><span style="color:#75715e"></span>                num <span style="color:#f92672">=</span> num <span style="color:#f92672">*</span> 10 <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(++</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">);</span>     <span style="color:#75715e">// ++i is equivalent to i = i + 1
</span><span style="color:#75715e"></span>            <span style="color:#f92672">}</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> sign <span style="color:#f92672">*</span> num<span style="color:#f92672">);</span>       <span style="color:#75715e">// calculate previous sum and current integer
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sign <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sign <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// calculate the sum in brackets, and push the
</span><span style="color:#75715e"></span>            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>sign<span style="color:#f92672">);</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>      <span style="color:#75715e">// initial sum in brackets are 0
</span><span style="color:#75715e"></span>            sign <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>       <span style="color:#75715e">// initial operator in brackets is positive
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>    <span style="color:#75715e">// update last sum = current sum * sign
</span><span style="color:#75715e"></span>            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">());</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h1 id="227-basic-calculator-ii">227. Basic Calculator II</h1>
<p>Link: <a href="https://leetcode.com/problems/basic-calculator-ii/">Basic Calculator II</a></p>
<h2 id="problem-description-1">Problem Description</h2>
<p>Implement a basic calculator to evaluate a simple expression string.</p>
<p>The expression string contains only <strong>non-negative</strong> integers, <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> operators and empty spaces ``. The integer division should truncate toward zero.</p>
<p><strong>Example 1:</strong></p>
<pre tabindex="0"><code>Input: &quot;3+2*2&quot;
Output: 7
</code></pre><p><strong>Example 2:</strong></p>
<pre tabindex="0"><code>Input: &quot; 3/2 &quot;
Output: 1
</code></pre><p><strong>Example 3:</strong></p>
<pre tabindex="0"><code>Input: &quot; 3+5 / 2 &quot;
Output: 5
</code></pre><p><strong>Note:</strong></p>
<ul>
<li>You may assume that the given expression is always valid.</li>
<li><strong>Do not</strong> use the <code>eval</code> built-in library function.</li>
</ul>
<h2 id="method--code-1">Method &amp; Code</h2>
<p>Use integers to store previous operand, current operand, and use character to store operator.</p>
<ul>
<li>If the operator is <code>+</code> or <code>-</code>, then add previous number to sum, and set current number to positive or negative.</li>
<li>If the operator is <code>*</code> or <code>/</code>, then multiply or divide two operands, and set previous number to this result.</li>
</ul>
<p>The reason is that <code>*</code> and <code>/</code> has higher priority, and can not involve previous result to multiply or divide.</p>
<p>Finally, add previous number to final result.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Use a stack to store calculate result of each operator and operand.
</span><span style="color:#75715e"> * Normally, parse current integer and calculate it with previous sum and sign.
</span><span style="color:#75715e"> * If reaches brackets, then consider the expression within brackets is a new expression.
</span><span style="color:#75715e"> * Push the sign before bracket pair for final evaluation for whole expression within brackets.
</span><span style="color:#75715e"> * Push a new initially sum 0 into stack, since the expression within brackets is a new expression.
</span><span style="color:#75715e"> * Due to sign is pushed into stack, when reaches the right part of bracket, pop out sign for calculation.
</span><span style="color:#75715e"> * After the bracket is end, pop the previous sum in bracket and before bracket to calculate the result.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param s given expression string
</span><span style="color:#75715e"> * @return calculation result of s
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculate</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

    Stack<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Stack<span style="color:#f92672">&lt;&gt;();</span>

    stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> sign <span style="color:#f92672">=</span> 1<span style="color:#f92672">,</span> num<span style="color:#f92672">;</span>      <span style="color:#75715e">// initially, sign will always be positive
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)))</span> <span style="color:#f92672">{</span>
            num <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">-</span> 1 <span style="color:#f92672">&amp;&amp;</span> Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">)))</span> <span style="color:#f92672">{</span>      <span style="color:#75715e">// calculate current numbers
</span><span style="color:#75715e"></span>                num <span style="color:#f92672">=</span> num <span style="color:#f92672">*</span> 10 <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(++</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>

            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> sign <span style="color:#f92672">*</span> num<span style="color:#f92672">);</span>      <span style="color:#75715e">// calculate previous sum and current integer with sign
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sign <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            sign <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// calculate the sum in brackets, push the initially sum 0
</span><span style="color:#75715e"></span>            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>sign<span style="color:#f92672">);</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>        <span style="color:#75715e">// bracket should be considered as a new calculation, and push a new init 0
</span><span style="color:#75715e"></span>            sign <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>                   <span style="color:#75715e">// initial operator in brackets is positive
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            <span style="color:#75715e">/*
</span><span style="color:#75715e">             * Pop out three items to calculate sum within current bracket pair.
</span><span style="color:#75715e">             * First item: current sum within brackets.
</span><span style="color:#75715e">             * Second item: sign of whole bracket pair.
</span><span style="color:#75715e">             * Third item: previous sum outside of bracket pair. */</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">*</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">());</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>     <span style="color:#75715e">// top of stack is always the result of current expression
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><h1 id="772-basic-calculator-iii">772. Basic Calculator III</h1>
<p>Link: <a href="https://leetcode.com/problems/basic-calculator-iii">Basic Calculator III</a></p>
<h2 id="problem-description-2">Problem Description</h2>
<p>Implement a basic calculator to evaluate a simple expression string.</p>
<p>The expression string may contain open <code>(</code> and closing parentheses <code>)</code>, the plus <code>+</code> or minus sign <code>-</code>, <strong>non-negative</strong>integers and empty spaces ``.</p>
<p>The expression string contains only non-negative integers, <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> operators , open <code>(</code> and closing parentheses <code>)</code>and empty spaces ``. The integer division should truncate toward zero.</p>
<p>You may assume that the given expression is always valid. All intermediate results will be in the range of <code>[-2147483648, 2147483647]</code>.</p>
<p>Some examples:</p>
<pre tabindex="0"><code>&quot;1 + 1&quot; = 2
&quot; 6-4 / 2 &quot; = 4
&quot;2*(5+5*2)/3+(6/2+8)&quot; = 21
&quot;(2+6* 3+5- (3*14/7+2)*5)+3&quot;=-12
</code></pre><p><strong>Note:</strong> <strong>Do not</strong> use the <code>eval</code> built-in library function.</p>
<h2 id="method--code-2">Method &amp; Code</h2>
<h3 id="two-stacks">Two Stacks</h3>
<p>Keep two stacks, one stores the operand and one stores the operators.</p>
<ul>
<li>Basic idea is to calculate two operands with one operator. If current operator has same or lower priority to previous operator (e.g., <code>*</code> and <code>+</code>), then directly calculate. This is the calculation order from left to right.</li>
<li>If current operator has higher priority, then push it to stack and finally calculate it from right to left.</li>
<li>When meeting parenthesis, push the left half first. Then calculate possible pairs from left to right. When meets the right part of parenthesis, pop out the operators and operands, calculate from right to left.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Keep two stacks, one stores the operand and one stores the operators.
</span><span style="color:#75715e"> * Basic idea is to calculate two operands with one operator.
</span><span style="color:#75715e"> * If current operator has same or lower priority to previous operator (e.g., * and +), then directly calculate.
</span><span style="color:#75715e"> * This is the calculation order from left to right.
</span><span style="color:#75715e"> * If current operator has higher priority, then push it to stack and finally calculate it from right to left.
</span><span style="color:#75715e"> * When meeting parenthesis, push the left half first. Then calculate possible pairs from left to right.
</span><span style="color:#75715e"> * When meets the right part of parenthesis, pop out the operators and operands, calculate from right to left.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param s expression string
</span><span style="color:#75715e"> * @return calculation result of s
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculate</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">/* Corner case */</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    Stack<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> nums <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Stack<span style="color:#f92672">&lt;&gt;();</span>        <span style="color:#75715e">// stores numbers
</span><span style="color:#75715e"></span>    Stack<span style="color:#f92672">&lt;</span>Character<span style="color:#f92672">&gt;</span> ops <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Stack<span style="color:#f92672">&lt;&gt;();</span>       <span style="color:#75715e">// stores operators (including parentheses)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> tmp<span style="color:#f92672">,</span> current <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>

    nums<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>current <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39; &#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        current<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ops<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">);</span>
        current<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>current <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>current <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39; &#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            current<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>current <span style="color:#f92672">==</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>c<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            tmp <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>current <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)))</span> <span style="color:#f92672">{</span>
                tmp <span style="color:#f92672">=</span> tmp <span style="color:#f92672">*</span> 10 <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">);</span>
                current<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            nums<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>tmp<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            ops<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">);</span>
            current<span style="color:#f92672">++;</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>current <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39; &#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                current<span style="color:#f92672">++;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                nums<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>0<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>ops<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                nums<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>operation<span style="color:#f92672">(</span>ops<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">(),</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">(),</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()));</span>
            <span style="color:#f92672">}</span>
            current<span style="color:#f92672">++;</span>
            ops<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            <span style="color:#75715e">/*
</span><span style="color:#75715e">             * If current operator has same or lower priority, then calculate directly from left to right.
</span><span style="color:#75715e">             * Otherwise, push to stack and wait for calculation from right to left. */</span>
            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>ops<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> precedence<span style="color:#f92672">(</span>c<span style="color:#f92672">,</span> ops<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
                nums<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>operation<span style="color:#f92672">(</span>ops<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">(),</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">(),</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()));</span>
            <span style="color:#f92672">}</span>

            ops<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
            current<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>ops<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        nums<span style="color:#f92672">.</span><span style="color:#a6e22e">push</span><span style="color:#f92672">(</span>operation<span style="color:#f92672">(</span>ops<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">(),</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">(),</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">()));</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> nums<span style="color:#f92672">.</span><span style="color:#a6e22e">pop</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * Calculation.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param operator operator
</span><span style="color:#75715e"> * @param second   second operand
</span><span style="color:#75715e"> * @param first    first operand
</span><span style="color:#75715e"> * @return calculation result
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">operation</span><span style="color:#f92672">(</span><span style="color:#66d9ef">char</span> operator<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> second<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> first<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>operator<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;+&#39;</span><span style="color:#f92672">:</span>
            <span style="color:#66d9ef">return</span> first <span style="color:#f92672">+</span> second<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">:</span>
            <span style="color:#66d9ef">return</span> first <span style="color:#f92672">-</span> second<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;*&#39;</span><span style="color:#f92672">:</span>
            <span style="color:#66d9ef">return</span> first <span style="color:#f92672">*</span> second<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">:</span>
            <span style="color:#66d9ef">return</span> first <span style="color:#f92672">/</span> second<span style="color:#f92672">;</span>       <span style="color:#75715e">// assume b is not 0
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="deque">Deque</h3>
<p>Follow the pseudo-code here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculate</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> l1 <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> o1 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> <span style="color:#75715e">// Initialization of level one
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> l2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">,</span> o2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span> <span style="color:#75715e">// Initialization of level two
</span><span style="color:#75715e"></span>    
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
        
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c is a digit<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

           <span style="color:#f92672">--&gt;</span> we have an operand of type number<span style="color:#f92672">,</span> so find its value <span style="color:#e6db74">&#34;num&#34;</span>
           <span style="color:#f92672">--&gt;</span> then evaluate at level two<span style="color:#f92672">:</span> l2 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>o2 <span style="color:#f92672">==</span> 1 <span style="color:#f92672">?</span> l2 <span style="color:#f92672">*</span> num <span style="color:#f92672">:</span> l2 <span style="color:#f92672">/</span> num<span style="color:#f92672">);</span>
       
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c is a lowercase letter<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

           <span style="color:#f92672">--&gt;</span> we have an operand of type variable<span style="color:#f92672">,</span> so find its name <span style="color:#e6db74">&#34;var&#34;</span>
           <span style="color:#f92672">--&gt;</span> then look up the variable mapping table to find its value <span style="color:#e6db74">&#34;num&#34;</span><span style="color:#f92672">;</span>
           <span style="color:#f92672">--&gt;</span> lastly evaluate at level two<span style="color:#f92672">:</span> l2 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>o2 <span style="color:#f92672">==</span> 1 <span style="color:#f92672">?</span> l2 <span style="color:#f92672">*</span> num <span style="color:#f92672">:</span> l2 <span style="color:#f92672">/</span> num<span style="color:#f92672">);</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c is an opening parenthesis<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

           <span style="color:#f92672">--&gt;</span> we have an operand of type subexpression<span style="color:#f92672">,</span> so find its string representation
           <span style="color:#f92672">--&gt;</span> then recursively call the <span style="color:#e6db74">&#34;calculate&#34;</span> function to find its value <span style="color:#e6db74">&#34;num&#34;</span><span style="color:#f92672">;</span>
           <span style="color:#f92672">--&gt;</span> lastly evaluate at level two<span style="color:#f92672">:</span> l2 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>o2 <span style="color:#f92672">==</span> 1 <span style="color:#f92672">?</span> l2 <span style="color:#f92672">*</span> num <span style="color:#f92672">:</span> l2 <span style="color:#f92672">/</span> num<span style="color:#f92672">);</span>
       
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c is a level two operator<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            <span style="color:#f92672">--&gt;</span> o2 needs to be updated<span style="color:#f92672">:</span> o2 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c is a level one operator<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            <span style="color:#f92672">--&gt;</span> demotion happens here<span style="color:#f92672">:</span> l1 <span style="color:#f92672">=</span> l1 <span style="color:#f92672">+</span> o1 <span style="color:#f92672">*</span> l2<span style="color:#f92672">;</span>
            <span style="color:#f92672">--&gt;</span> o1 needs to be updated<span style="color:#f92672">:</span> o1 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>
            <span style="color:#f92672">--&gt;</span> l2<span style="color:#f92672">,</span> o2 need to be reset<span style="color:#f92672">:</span> l2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">,</span> o2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

       <span style="color:#f92672">}</span>

       <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>l1 <span style="color:#f92672">+</span> o1 <span style="color:#f92672">*</span> l2<span style="color:#f92672">);</span> <span style="color:#75715e">// end of expression reached, so demotion happens again
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Use a deque to store operands and operators.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param s expression string
</span><span style="color:#75715e"> * @return calculation result of s
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">calculate</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> l1 <span style="color:#f92672">=</span> 0<span style="color:#f92672">,</span> o1 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> l2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">,</span> o2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

    Deque<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayDeque<span style="color:#f92672">&lt;&gt;();</span>      <span style="color:#75715e">// stack to simulate recursion
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>c<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> num <span style="color:#f92672">=</span> c <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">;</span>

            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1 <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> Character<span style="color:#f92672">.</span><span style="color:#a6e22e">isDigit</span><span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i <span style="color:#f92672">+</span> 1<span style="color:#f92672">)))</span> <span style="color:#f92672">{</span>
                num <span style="color:#f92672">=</span> num <span style="color:#f92672">*</span> 10 <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(++</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>

            l2 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>o2 <span style="color:#f92672">==</span> 1 <span style="color:#f92672">?</span> l2 <span style="color:#f92672">*</span> num <span style="color:#f92672">:</span> l2 <span style="color:#f92672">/</span> num<span style="color:#f92672">);</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            <span style="color:#75715e">/* Preserve current calculation status.
</span><span style="color:#75715e">             * Then reset them for next calculation.*/</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>l1<span style="color:#f92672">);</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>o1<span style="color:#f92672">);</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>l2<span style="color:#f92672">);</span>
            stack<span style="color:#f92672">.</span><span style="color:#a6e22e">offerFirst</span><span style="color:#f92672">(</span>o2<span style="color:#f92672">);</span>
            l1 <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
            o1 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
            l2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
            o2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;)&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

            <span style="color:#75715e">/*
</span><span style="color:#75715e">             * First preserve the result of current calculation.
</span><span style="color:#75715e">             * Then restore previous calculation status. */</span>
            <span style="color:#66d9ef">int</span> num <span style="color:#f92672">=</span> l1 <span style="color:#f92672">+</span> o1 <span style="color:#f92672">*</span> l2<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                o2 <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                l2 <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                o1 <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>stack<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                l1 <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>
            <span style="color:#f92672">}</span>

            l2 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>o2 <span style="color:#f92672">==</span> 1 <span style="color:#f92672">?</span> l2 <span style="color:#f92672">*</span> num <span style="color:#f92672">:</span> l2 <span style="color:#f92672">/</span> num<span style="color:#f92672">);</span>       <span style="color:#75715e">// previous calculation status is now in effect
</span><span style="color:#75715e"></span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            o2 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>

        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">==</span> 0 <span style="color:#f92672">||</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;(&#39;</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                o1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">continue</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            l1 <span style="color:#f92672">=</span> l1 <span style="color:#f92672">+</span> o1 <span style="color:#f92672">*</span> l2<span style="color:#f92672">;</span>
            o1 <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">?</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>

            l2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
            o2 <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>l1 <span style="color:#f92672">+</span> o1 <span style="color:#f92672">*</span> l2<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://mirage-zero-nine.github.io/2020/04/lc-8-205-249-293-482-551-686-929-1160-1169-string-problems/" data-tooltip="LC 8 205 249 293 482 551 686 929 1160 1169 - String Problems">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://mirage-zero-nine.github.io/2020/04/lc-1114-1115-1188-semaphore/" data-tooltip="LC 1114 1115 1188 - Semaphore">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2022 <a href="https://miragespace.me/">BorisMirage</a>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://mirage-zero-nine.github.io/2020/04/lc-8-205-249-293-482-551-686-929-1160-1169-string-problems/" data-tooltip="LC 8 205 249 293 482 551 686 929 1160 1169 - String Problems">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://mirage-zero-nine.github.io/2020/04/lc-1114-1115-1188-semaphore/" data-tooltip="LC 1114 1115 1188 - Semaphore">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://mirage-zero-nine.github.io/img/avatar.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Notebook</h4>
    
      <div id="about-card-bio">Bingo!</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Seattle
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://mirage-zero-nine.github.io/img/bg.jpeg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://mirage-zero-nine.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

