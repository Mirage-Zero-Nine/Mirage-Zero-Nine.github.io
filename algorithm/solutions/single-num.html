<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Problem Set: Single Number | Algorithm</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../../post/index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">Résumé</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>
                Problem Set: Single Number
            </h1>
        </div>

        <div class="text-right post-date">
            June 30, 2019
        </div>

        <div class="post-main">
            <p>Links:</p>
            <ul>
                <li><a href='https://leetcode.com/problems/single-number'>Single Number</a></li>
                <li><a href='https://leetcode.com/problems/single-number-ii'>Single Number II</a></li>
                <li><a href='https://leetcode.com/problems/single-number-iii/'>Single Number III</a></li>

            </ul>
            <h2>Problem description </h2>
            <h3>Single Number</h3>
            <p>Given a <strong>non-empty</strong> array of integers, every element appears <em>twice</em> except for
                one. Find that single one.</p>
            <p><strong>Note:</strong></p>
            <p>Your algorithm should have a linear runtime complexity. Could you implement it without using extra
                memory?</p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input: [2,2,1]
Output: 1
</code></pre>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input: [4,1,2,1,2]
Output: 4
</code></pre>
            <h3>Single Number II</h3>
            <p>Given a <strong>non-empty</strong> array of integers, every element appears <em>three</em> times except
                for one, which appears exactly once. Find that single one.</p>
            <p><strong>Note:</strong></p>
            <p>Your algorithm should have a linear runtime complexity. Could you implement it without using extra
                memory?</p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input: [2,2,3,2]
Output: 3
</code></pre>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input: [0,1,0,1,0,1,99]
Output: 99
</code></pre>
            <h3>Single Number III</h3>
            <p>Given an array of numbers <code>nums</code>, in which exactly two elements appear only once and all the
                other elements appear exactly twice. Find the two elements that appear only once.</p>
            <p><strong>Example:</strong></p>
            <pre><code>Input:  [1,2,1,3,2,5]
Output: [3,5]
</code></pre>
            <p><strong>Note</strong>:</p>
            <ol start=''>
                <li>The order of the result is not important. So in the above example, <code>[5, 3]</code> is also
                    correct.
                </li>
                <li>Your algorithm should run in linear runtime complexity. Could you implement it using only constant
                    space complexity?
                </li>

            </ol>
            <h2>Method</h2>
            <h3>Single Number</h3>
            <p><code>XOR</code> each adjacent number and the last number is the result.</p>
            <h3>Single Number II</h3>
            <p><strong>XOR</strong></p>
            <p>Starting from <code>XOR</code> operator which could be used to detect the bit which appears odd number of
                times: 1, 3, 5, etc.</p>
            <ul>
                <li>XOR of zero and a bit results in that bit: <code>0 XOR x = x</code>.</li>

            </ul>
            <ul>
                <li>XOR of two equal bits (even if they are zeros) results in a zero: <code>x XOR x = 0</code>.</li>

            </ul>
            <p>and so on and so forth, i.e. one could see the bit in a bitmask only if it appears odd number of
                times.</p>
            <p><img src='../../static/img/xor-6194447.png' alt='fig' style="height: auto; width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p>That&#39;s already great, so one could detect the bit which appears once, and the bit which appears three
                times. The problem is to distinguish between these two situations.</p>
            <p><strong>AND and NOT</strong></p>
            <p>To separate number that appears once from a number that appears three times let&#39;s use two bitmasks
                instead of one: <code>seen_once</code> and <code>seen_twice</code>. </p>
            <p>The idea is to </p>
            <ul>
                <li>change <code>seen_once</code> only if <code>seen_twice</code> is unchanged</li>
                <li>change <code>seen_twice</code> only if <code>seen_once</code> is unchanged</li>

            </ul>
            <p><img src='../../static/img/three-6194485.png' alt='fig' style="height: auto; width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p>This way bitmask <code>seen_once</code> will keep only the number which appears once and not the numbers
                which appear three times.</p>
            <h3>Single Number III</h3>
            <p>Two pass with bit manipulation.</p>
            <ul>
                <li>In the first pass, <code>XOR</code> all elements in the array, and get the <code>XOR</code> of the
                    two numbers need to find. Note that since the two numbers are distinct, so there must be a set bit
                    (that is, the bit with value &#39;1&#39;) in the XOR result. Find out an arbitrary set bit (for
                    example, the rightmost set bit).
                </li>
                <li>In the second pass, divide all numbers into two groups, one with the aforementioned bit set, another
                    with the aforementioned bit unset. Two different numbers need to find must fall into the two
                    distinct groups. <code>XOR</code> numbers in each group, the number can be found in either group.
                </li>

            </ul>
            <h2>Code</h2>
            <h3>Single Number</h3>
            <pre><code class='language-java' lang='java'>/**
 * XOR each adjacent number and the last number is the result.
 *
 * @param nums int array
 * @return number appears only once
 */
public int singleNumber(int[] nums) {
    int res = 0;
    for (int num : nums) {
        res ^= num;     // bitwise XOR
    }
    return res;
}
</code></pre>
            <h3>Single Number II</h3>
            <pre><code class='language-java' lang='java'>/**
 * Bitwise operation.
 *
 * @param nums int array
 * @return number appears only once
 */
public int singleNumber(int[] nums) {
    int a = 0, b = 0;
    for (int num : nums) {
        a = (a ^ num) &amp; ~b;        // ~ bitwise compliment, &amp; bitwise and
        b = (b ^ num) &amp; ~a;
    }
    return a;
}
</code></pre>
            <h3>Single Number III</h3>
            <pre><code class='language-java' lang='java'>/**
 * Get the XOR of the two numbers we need to find.
 *
 * @param nums given array
 * @return two elements that appear only once
 */
public int[] singleNumber(int[] nums) {

    int diff = 0;
    for (int num : nums) {
        diff ^= num;
    }

    diff &amp;= -diff;      // get its last set bit

    int[] result = {0, 0};        // this array stores the two numbers we will return

    for (int num : nums) {
        if ((num &amp; diff) == 0) {        // the bit is not set
            result[0] ^= num;
        } else {        // the bit is set
            result[1] ^= num;
        }
    }

    return result;
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>