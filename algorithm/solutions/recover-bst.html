<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Recover Binary Search Tree | Algorithm</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../../post/index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">Résumé</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>Recover Binary Search Tree</h1>
        </div>

        <div class="text-right post-date">
            August 07, 2019
        </div>

        <div class="post-main">
            <p>Link: <a href='https://leetcode.com/problems/recover-binary-search-tree/'>Recover Binary Search Tree</a>
            </p>
            <h2>Problem description </h2>
            <p>Two elements of a binary search tree (BST) are swapped by mistake.</p>
            <p>Recover the tree without changing its structure.</p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input: [1,3,null,null,2]

   1
  /
 3
  \
   2

Output: [3,1,null,null,2]

   3
  /
 1
  \
   2
</code></pre>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input: [3,1,4,null,null,2]

  3
 / \
1   4
   /
  2

Output: [2,1,4,null,null,3]

  2
 / \
1   4
   /
  3
</code></pre>
            <p><strong>Follow up:</strong></p>
            <ul>
                <li>A solution using <code>O(n)</code> space is pretty straight forward.</li>
                <li>Could you devise a constant space solution?</li>

            </ul>
            <h2>Method</h2>
            <p>Morris Traversal.</p>
            <p>To complete the traversal without O(n) space, use the null in leaf node to store root of current sub
                tree. Each time, set the right child of right leaf of current tree to point to root of current tree.</p>
            <p>When in-order traversal is completed, the right child of last node is the root of current tree.</p>
            <p>In this way, the right child of leaf (null) can be used as stack and to save space.</p>
            <h2>Code</h2>
            <pre><code class='language-java' lang='java'>/**
 * Morris traversal. Store the root node of current subtree to right most leaf&#39;s right child.
 * Space: O(1).
 *
 * @param root root node of tree
 */
public void recoverTree(TreeNode root) {
    TreeNode temp;
    TreeNode t1 = null, t2 = null;
    TreeNode previous = null;

    /*
     * Morris Traversal.
     * To complete the traversal without O(n) space, use the null in leaf node to store root of current sub tree.
     * Each time, set the right child of right leaf of current tree to point to root of current tree.
     * When in-order traversal is completed, the right child of last node is the root of current tree.
     * In this way, the right child of leaf (null) can be used as stack and to save space. */
    while (root != null) {
        if (root.left != null) {       // in order traversal, not reaches the end of left most
            temp = root.left;
            while (temp.right != null &amp;&amp; temp.right != root) {      // move temp to left subtree&#39;s right most
                temp = temp.right;
            }

            if (temp.right == null) {      // node not traversed yet
                temp.right = root;
                root = root.left;       // move to left subtree to repeat process
            } else {        // node has been traversed
                if (previous != null &amp;&amp; previous.val &gt; root.val) {
                    if (t1 == null) {
                        t1 = previous;
                    }
                    t2 = root;
                }
                previous = root;
                temp.right = null;
                root = root.right;
            }
        } else {
            if (previous != null &amp;&amp; previous.val &gt; root.val) {
                if (t1 == null) {
                    t1 = previous;
                }
                t2 = root;
            }
            previous = root;
            root = root.right;
        }
    }

    if (t1 != null) {       // swap two nodes value
        int t = t1.val;
        t1.val = t2.val;
        t2.val = t;
    }
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>