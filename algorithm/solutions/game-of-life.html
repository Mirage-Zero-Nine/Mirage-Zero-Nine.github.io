<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Game of Life | Posts</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../../post/index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">Résumé</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>
                Game of Life
            </h1>
        </div>

        <div class="text-right post-date">
            July 01, 2019
        </div>
        <div class="post-main">
            <p><span>Link: </span><a href='https://leetcode.com/problems/game-of-life'><span>Game of Life</span></a></p>
            <h2><span>Problem description </span></h2>
            <p><span>According to the </span><a href='https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life'><span>Wikipedia&#39;s article</span></a><span>: &quot;The </span><strong><span>Game of Life</span></strong><span>, also known simply as </span><strong><span>Life</span></strong><span>, is a cellular automaton devised by the British mathematician John Horton Conway in 1970.&quot;</span>
            </p>
            <p>
                <span>Given a </span><em><span>board</span></em><span> with </span><em><span>m</span></em><span> by </span><em><span>n</span></em><span> cells, each cell has an initial state </span><em><span>live</span></em><span> (1) or </span><em><span>dead</span></em><span> (0). Each cell interacts with its </span><a
                    href='https://en.wikipedia.org/wiki/Moore_neighborhood'><span>eight neighbors</span></a><span> (horizontal, vertical, diagonal) using the following four rules (taken from the above Wikipedia article):</span>
            </p>
            <ol>
                <li>
                    <span>Any live cell with fewer than two live neighbors dies, as if caused by under-population.</span>
                </li>
                <li><span>Any live cell with two or three live neighbors lives on to the next generation.</span></li>
                <li><span>Any live cell with more than three live neighbors dies, as if by over-population..</span></li>
                <li>
                    <span>Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction.</span>
                </li>

            </ol>
            <p><span>Write a function to compute the next state (after one update) of the board given its current state. The next state is created by applying the above rules simultaneously to every cell in the current state, where births and deaths occur simultaneously.</span>
            </p>
            <p><strong><span>Example:</span></strong></p>
            <pre><code>Input:
[
  [0,1,0],
  [0,0,1],
  [1,1,1],
  [0,0,0]
]
Output:
[
  [0,0,0],
  [1,0,1],
  [0,1,1],
  [0,1,0]
]
</code></pre>
            <p><strong><span>Follow up</span></strong><span>:</span></p>
            <ol>
                <li><span>Could you solve it in-place? Remember that the board needs to be updated at the same time: You cannot update some cells first and then use their updated values to update other cells.</span>
                </li>
                <li><span>In this question, we represent the board using a 2D array. In principle, the board is infinite, which would cause problems when the active area encroaches the border of the array. How would you address these problems?</span>
                </li>

            </ol>
            <h2><span>Method</span></h2>
            <p><span>To solve it in place, using 2 bits to store 2 states:</span></p>
            <pre><code>[2nd bit, 1st bit] = [next state, current state]

- 00  dead (next) &lt;- dead (current)
- 01  dead (next) &lt;- live (current)
- 10  live (next) &lt;- dead (current)
- 11  live (next) &lt;- live (current)
</code></pre>
            <ul>
                <li>
                    <span>In the beginning, every cell is either </span><code>00</code><span> or </span><code>01</code><span>.</span>
                </li>
                <li>
                    <span>Notice that </span><code>1st</code><span> state is independent of </span><code>2nd</code><span> state.</span>
                </li>
                <li><span>Imagine all cells are instantly changing from the </span><code>1st</code><span> to the </span><code>2nd</code><span> state, at the same time.</span>
                </li>
                <li>
                    <span>Count # of neighbors from </span><code>1st</code><span> state and set </span><code>2nd</code><span> state bit.</span>
                </li>
                <li><span>Since every </span><code>2nd</code><span> state is by default dead, no need to consider transition </span><code>01
                    -&gt; 00</code><span>.</span></li>
                <li><span>In the end, delete every cell&#39;s </span><code>1st</code><span> state by doing </span><code>&gt;&gt;
                    1</code><span>.</span></li>

            </ul>
            <p><span>For each cell&#39;s </span><code>1st</code><span> bit, check the 8 pixels around itself, and set the cell&#39;s </span><code>2nd</code><span> bit.</span>
            </p>
            <ul>
                <li><span>Transition </span><code>01 -&gt; 11</code><span>: when </span><code>board == 1</code><span> and </span><code>lives
                    &gt;= 2 &amp;&amp; lives &lt;= 3</code><span>.</span></li>
                <li><span>Transition </span><code>00 -&gt; 10</code><span>: when </span><code>board == 0</code><span> and  </span><code>lives
                    == 3</code><span>.</span></li>

            </ul>
            <p><span>To get the current state, simply do</span></p>
            <pre><code class='language-java' lang='java'>board[i][j] &amp; 1		// AND operation with last bit, remove all other bits
</code></pre>
            <p><span>To get the next state, simply do</span></p>
            <pre><code class='language-java' lang='java'>board[i][j] &gt;&gt; 1		// remove last bit
</code></pre>
            <h2><span>Code</span></h2>
            <pre><code class='language-java' lang='java'>/**
 * Use 2 bits as state transition. First bit represents second state and second bit representing current state.
 * For instance, 01 means first state is live and second state is died.
 * Count the neighbors of current cell and find next state. Fill with number of these states.
 * Finally, traverse board and right shift one bit to remove first state, as first state is the last bit of number.
 *
 * @param board given board
 */
public void gameOfLife(int[][] board) {
    if (board.length == 0) {
        return;
    }
    for (int i = 0; i &lt; board.length; i++) {
        for (int j = 0; j &lt; board[0].length; j++) {
            int count = neighbors(board, i, j);

            /*
             * According to the game rules:
             * Case 1: board[i][j] == 1
             * 1. neighbors are less than 2 or larger than 3 -&gt; 2nd state is 0, which is 01, nothing changed.
             * 2. neighbors are equal to 2 or 3 -&gt; 2nd state is 1, which is 11, fill this cell with 3.
             * Case 2: board[i][j] == 1
             * 1. neighbors are equal to 3 -&gt; 2nd state is 1, fill current cell with 2.
             * 2. neighbors are not equal to 3 -&gt; 2nd state is 0, nothing changed. */
            if (board[i][j] == 1 &amp;&amp; (count == 2 || count == 3)) {
                board[i][j] = 3;
            } else if (board[i][j] == 0 &amp;&amp; count == 3) {
                board[i][j] = 2;
            }
        }
    }

    for (int i = 0; i &lt; board.length; i++) {
        for (int j = 0; j &lt; board[0].length; j++) {
            board[i][j] &gt;&gt;= 1;      // right shift 1 bit to remove first state
        }
    }
}

/**
 * Count # of live neighbors of current cell.
 *
 * @param board given boards
 * @param i     row
 * @param j     column
 * @return # of live neighbors
 */
private int neighbors(int[][] board, int i, int j) {
    int c = 0;
    for (int k = Math.max(0, i - 1); k &lt; Math.min(board.length, i + 2); k++) {
        for (int l = Math.max(0, j - 1); l &lt; Math.min(board[0].length, j + 2); l++) {

            /*
             * Count live neighbors in current state.
             * If digits last bit is 0, then this number is converted to 1.
             * Otherwise, &amp; 1 convert it to 0. */
            c += board[k][l] &amp; 1;
        }
    }

    return c - board[i][j];
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>