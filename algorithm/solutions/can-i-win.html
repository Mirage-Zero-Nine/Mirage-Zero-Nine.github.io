<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Can I Win | Posts</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">
    <link rel="stylesheet" href="../../static/css/post-content.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
</head>
<body>

<!--        nav bar     -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">About Me</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>Can I Win</h1>
        </div>

        <div class="text-right post-date">
            June 08, 2019
        </div>

        <div class="post-main">
            <p>Link: <a href='https://leetcode.com/problems/can-i-win'>Can I Win</a></p>
            <h2>Problem description </h2>
            <p>In the &quot;100 game,&quot; two players take turns adding, to a running total, any integer from 1..10.
                The player who first causes the running total to reach or exceed 100 wins. </p>
            <p>What if we change the game so that players cannot re-use integers? </p>
            <p>For example, two players might take turns drawing from a common pool of numbers of 1..15 without
                replacement until they reach a total &gt;= 100.</p>
            <p>Given an integer <code>maxChoosableInteger</code> and another integer <code>desiredTotal</code>,
                determine if the first player to move can force a win, assuming both players play optimally. </p>
            <p>You can always assume that <code>maxChoosableInteger</code> will not be larger than 20 and <code>desiredTotal</code>
                will not be larger than 300.</p>
            <p><strong>Example</strong></p>
            <pre><code>Input:
maxChoosableInteger = 10
desiredTotal = 11

Output:
false

Explanation:
No matter which integer the first player choose, the first player will lose.
The first player can choose an integer from 1 up to 10.
If the first player choose 1, the second player can only choose integers from 2 up to 10.
The second player will win by choosing 10 and get a total = 11, which is &gt;= desiredTotal.
Same with other integers chosen by the first player, the second player will always win.
</code></pre>
            <h2>Method</h2>
            <p>The key state is that, if next player lose, then current player wins. Therefore, this problem is to
                reduce the backtracking searching tree. </p>
            <p>The wining state should be this: <strong>If current sum is larger than desire sum, then previous player
                lost (current player wins).</strong></p>
            <p>So, iterate from 1 to max choosable number, and at each number, generate a search tree to see when it
                reaches the winning state.</p>
            <p>Note that the key of hash map is actually the boolean array that store the each integer state, whether
                they were chosen or not. And the method to convert it from array to integer is to regard the array as
                binary number. For instance, <code>[ture, false, ture, false]</code> can be regarded as
                <code>1010</code>.</p>
            <h2>Code</h2>
            <pre><code class='language-java' lang='java'>private HashMap&lt;Integer, Boolean&gt; m = new HashMap&lt;&gt;();       // hash map store backtrack temp result

/**
 * DFS with pruning to reduce time.
 *
 * @param maxChoosableInteger max choosable integer
 * @param desiredTotal        total to reach
 * @return if the first player to move can force a win
 */
public boolean canIWin(int maxChoosableInteger, int desiredTotal) {

    /* Corner case */
    if (desiredTotal &lt;= maxChoosableInteger) {
        return true;
    }
    if (maxChoosableInteger + maxChoosableInteger * (maxChoosableInteger - 1) / 2 &lt; desiredTotal) {
        return false;
    }

    return backtracking(maxChoosableInteger + 1, new boolean[maxChoosableInteger + 1], desiredTotal);
}

/**
 * Backtracking with a hash map for pruning.
 *
 * @param max          max choosable integer
 * @param chosen       integers has been choosen
 * @param currentTotal current remaining total
 * @return if the first player to move can force a win
 */
private boolean backtracking(int max, boolean[] chosen, int currentTotal) {

    if (currentTotal &lt;= 0) {        // previous step has won
        return false;
    }

    int current = transfer(chosen);
    if (m.containsKey(current)) {
        return m.get(current);      // reuse previous result to reduce time
    }

    for (int i = 1; i &lt; max; i++) {

        if (!chosen[i]) {       // choose a new number for result tree
            chosen[i] = true;

            /* If next player lose, then current player wins */
            if (!backtracking(max, chosen, currentTotal - i)) {
                m.put(current, true);
                chosen[i] = false;      // flip back to previous situation for next iteration
                return true;            // only one winning situation will suffice
            }
            chosen[i] = false;      // flip back to previous situation for next iteration
        }
    }
    m.put(current, false);      // no winning situation for current player

    return false;
}


/**
 * Regard bit array as a integer and transfer it.
 *
 * @param arr given boolean array
 * @return integer that this array representing
 */
private int transfer(boolean[] arr) {
    int num = 0;
    for (boolean x : arr) {
        num &lt;&lt;= 1;      // left shift one bit
        if (x) {
            num |= 1;       // turn false to 0
        }
    }
    return num;
}
</code></pre>
        </div>
    </div>
</section>
<!--        inner script to control nav bar        -->

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>
</body>
</html>