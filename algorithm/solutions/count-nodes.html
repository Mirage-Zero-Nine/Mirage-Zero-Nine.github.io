<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Count Complete Tree Nodes | Posts</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../../post/index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">Résumé</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>Count Complete Tree Nodes</h1>
        </div>

        <div class="text-right post-date">
            June 11, 2019
        </div>

        <div class="post-main">
            <p>Link: <a href='https://leetcode.com/problems/count-complete-tree-nodes'>Count Complete Tree Nodes</a></p>
            <h2>Problem description </h2>
            <p>Given a <strong>complete</strong> binary tree, count the number of nodes.</p>
            <p><strong>Note:</strong></p>
            <p><strong>Definition of a complete binary tree from Wikipedia:</strong>
                In a complete binary tree every level, except possibly the last, is completely filled, and all nodes in
                the last level are as far left as possible. It can have between 1 and 2h nodes inclusive at the last
                level h.</p>
            <p><strong>Example:</strong></p>
            <pre><code>Input:
    1
   / \
  2   3
 / \  /
4  5 6

Output: 6
</code></pre>
            <h2>Method</h2>
            <p>The easiest approach is BFS. However, to reduce time consumption to <code>O(log(n)^2)</code>, it should
                implement binary search in this problem. </p>
            <p>Binary search in this problem is tricky. Find the left-most child depth and right-most depth, compare
                those two values. If they are equal, then the elements are fixed. Otherwise, recursively repeat this
                process with left child and right child, until both child is full binary tree.</p>
            <h2>Code</h2>
            <pre><code class='language-java' lang='java'>/**
 * Calculate tree depth each time.
 * If the tree is full tree, then nodes = 2^depth - 1.
 * Otherwise, cut tree into left child and right child, until both tree is full binary tree.
 *
 * @param root root node
 * @return number of nodes in tree
 */
public int countNodes(TreeNode root) {

    /* Corner case */
    if (root == null) {
        return 0;
    }

    int leftDepth = depth(root, true);      // left sub tree depth
    int rightDepth = depth(root, false);        // right sub tree length

    return leftDepth == rightDepth ? (1 &lt;&lt; leftDepth) - 1 : (1 + countNodes(root.left) + countNodes(root.right));
}

/**
 * Calculate tree depth.
 *
 * @param r    root node
 * @param left search left child or right child
 * @return depth of current tree
 */
private int depth(TreeNode r, boolean left) {
    int depth = 0;
    while (r != null) {
        r = left ? r.left : r.right;
        depth++;
    }
    return depth;
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>