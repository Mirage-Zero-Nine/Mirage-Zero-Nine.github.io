<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Problem Set: Find Majority Element in Array | Algorithm</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../../post/index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">Résumé</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>
                Problem Set: Find Majority Element in Array
            </h1>
        </div>

        <div class="text-right post-date">
            August 11, 2019
        </div>
        <div class="post-main">
            <p>Links:</p>
            <ul>
                <li><a href='https://leetcode.com/problems/majority-element'>Majority Element</a></li>
                <li><a href='https://leetcode.com/problems/majority-element-ii/'>Majority Element II</a></li>
                <li><a href='https://leetcode.com/problems/online-majority-element-in-subarray/submissions/'>Online
                    Majority Element In Subarray</a></li>

            </ul>
            <h2>Problem description </h2>
            <h3>Majority Element</h3>
            <p>Given an array of size <em>n</em>, find the majority element. The majority element is the element that
                appears <strong>more than</strong> <code>n/2</code>times.</p>
            <p>You may assume that the array is non-empty and the majority element always exist in the array.</p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input: [3,2,3]
Output: 3
</code></pre>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input: [2,2,1,1,1,2,2]
Output: 2
</code></pre>
            <h3>Majority Element II</h3>
            <p>Given an integer array of size <em>n</em>, find all elements that appear more than <code>n/3</code>
                times.</p>
            <p><strong>Note:</strong> The algorithm should run in linear time and in O(1) space.</p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input: [3,2,3]
Output: [3]
</code></pre>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input: [1,1,1,3,3,2,2,2]
Output: [1,2]
</code></pre>
            <h3>Online Majority Element In Subarray</h3>
            <p>Implementing the class <code>MajorityChecker</code>, which has the following API:</p>
            <ul>
                <li><p><code>MajorityChecker(int[] arr)</code> constructs an instance of MajorityChecker with the given
                    array <code>arr</code>;</p>
                </li>
                <li><pre><code>int query(int left, int right, int threshold)
</code></pre>
                    <p> has arguments such that:</p>
                    <ul>
                        <li><code>0 &lt;= left &lt;= right &lt; arr.length</code> representing a subarray of
                            <code>arr</code>;
                        </li>
                        <li><code>2 * threshold &gt; right - left + 1</code>, ie. the threshold is always a strict
                            majority of the length of the subarray
                        </li>

                    </ul>
                </li>

            </ul>
            <p>Each <code>query(...)</code> returns the element in <code>arr[left], arr[left+1], ..., arr[right]</code>
                that occurs at least <code>threshold</code>times, or <code>-1</code> if no such element exists.</p>
            <p><strong>Example:</strong></p>
            <pre><code>MajorityChecker majorityChecker = new MajorityChecker([1,1,2,2,1,1]);
majorityChecker.query(0,5,4); // returns 1
majorityChecker.query(0,3,3); // returns -1
majorityChecker.query(2,3,2); // returns 2
</code></pre>
            <p><strong>Constraints:</strong></p>
            <ul>
                <li><code>1 &lt;= arr.length &lt;= 20000</code></li>
                <li><code>1 &lt;= arr[i] &lt;= 20000</code></li>
                <li>For each query, <code>0 &lt;= left &lt;= right &lt; len(arr)</code></li>
                <li>For each query, <code>2 * threshold &gt; right - left + 1</code></li>
                <li>The number of queries is at most <code>10000</code></li>

            </ul>
            <h2>Method</h2>
            <h3>Majority Element</h3>
            <p>Count bit sum for each number. The majority element will make each bits make up this majority number
                appearing more than n/2 times.</p>
            <h3>Majority Element II</h3>
            <p>Boyer-Moore voting algorithm.</p>
            <p>The essential concepts is to keep a counter for the majority number X. If find a number Y that is not X,
                the current counter should deduce 1. The reason is that if there is 5 X and 4 Y, there would be one
                (5-4) more X than Y.</p>
            <h3>Online Majority Element In Subarray</h3>
            <p>Implement Boyer-Moore voting algorithm to find majority element in subarray. The idea is same as previous
                problem, except in this problem is to find majority element of <code>n/2</code> instead of
                <code>n/3</code>, which is much more easier. </p>
            <h2>Code</h2>
            <h3>Majority Element</h3>
            <pre><code class='language-java' lang='java'>/**
 * Count bit sum for each number.
 * The majority element will make each bits make up this majority number appearing more than n/2 times.
 *
 * @param nums given array
 * @return majority element
 */
public int majorityElement(int[] nums) {
    int[] bit = new int[32];
    for (int num : nums) {
        for (int i = 0; i &lt; 32; i++)
            if ((num &gt;&gt; (31 - i) &amp; 1) == 1) {       // count bit appearance
                bit[i]++;
            }
    }

    int majority = 0;
    for (int i = 0; i &lt; 32; i++) {
        bit[i] = bit[i] &gt; nums.length / 2 ? 1 : 0;
        majority += bit[i] * (1 &lt;&lt; (31 - i));
    }
    return majority;
}
</code></pre>
            <h3>Majority Element II</h3>
            <pre><code class='language-java' lang='java'>/**
 * The essential concepts is to keep a counter for the majority number X.
 * If find a number Y that is not X, the current counter should deduce 1.
 * The reason is that if there is 5 X and 4 Y, there would be one (5-4) more X than Y.
 * This could be explained as &quot;4 X being paired out by 4 Y&quot;.
 *
 * @param nums given array
 * @return find all elements that appear more than n/3 times
 */
public List&lt;Integer&gt; majorityElement(int[] nums) {

    List&lt;Integer&gt; res = new ArrayList&lt;&gt;();

    /* Corner case */
    if (nums.length == 0) {
        return res;
    }

    int num1 = nums[0], num2 = nums[0], count1 = 1, count2 = 0;

    for (int val : nums) {
        if (val == num1) {
            count1++;
        } else if (val == num2) {
            count2++;
        } else if (count1 == 0) {
            num1 = val;
            count1++;
        } else if (count2 == 0) {
            num2 = val;
            count2++;
        } else {
            count1--;
            count2--;
        }
    }
    count1 = 0;
    count2 = 0;
    for (int val : nums) {
        if (val == num1) {
            count1++;
        } else if (val == num2) {
            count2++;
        }
    }
    if (count1 &gt; nums.length / 3) {
        res.add(num1);
    }
    if (count2 &gt; nums.length / 3) {
        res.add(num2);
    }
    return res;
}
</code></pre>
            <h3>Online Majority Element In Subarray</h3>
            <pre><code class='language-java' lang='java'>public class MajorityChecker {
    private int[] arr;

    /**
     * Initialization of structure.
     *
     * @param arr given array
     */
    public MajorityChecker(int[] arr) {
        this.arr = arr;
    }

    /**
     * Boyer-Moore voting algorithm.
     * Traverse array twice. First time find the majority and second time count if it is satisfied with threshold.
     * Majority element in array will be at least 2/n times.
     * Therefore, use a count and a temp to traverse the array.
     * If current element in array is temp, count++, otherwise, count--.
     * And if count == 0, replace temp with current element in array.
     * The majority element will be the last element in temp when traverse completed.
     *
     * @param left      left bound
     * @param right     right bound
     * @param threshold limit of occurrence
     * @return the element in a[left], a[left+1], ..., a[right] that occurs at least threshold times, or -1 if none
     */
    public int query(int left, int right, int threshold) {
        int count = 0, majority = -1;
        for (int i = left; i &lt;= right; i++) {
            if (count == 0) {
                majority = arr[i];
            }
            count = (majority == arr[i]) ? count + 1 : count - 1;

        }

        count = 0;
        for (int i = left; i &lt;= right; i++) {
            if (arr[i] == majority) {
                count++;
            }
        }
        return (count &gt;= threshold) ? majority : -1;
    }

    public static void main(String[] args) {
        MajorityChecker test = new MajorityChecker(new int[]{1, 1, 2, 2, 1, 1});
        System.out.println(test.query(0, 5, 4));
        System.out.println(test.query(0, 3, 3));
        System.out.println(test.query(2, 3, 2));
    }
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>