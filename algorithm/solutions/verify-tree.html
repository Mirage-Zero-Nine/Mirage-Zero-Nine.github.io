<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Verify Preorder Sequence in Binary Search Tree/Binary Tree | Posts</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../../post/index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">Résumé</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>Verify Preorder Sequence in Binary Search Tree/Binary Tree</h1>
        </div>

        <div class="text-right post-date">
            June 27, 2019
        </div>

        <div class="post-main">
            <p><span>Links: </span></p>
            <ul>
                <li><a href='https://leetcode.com/problems/verify-preorder-sequence-in-binary-search-tree'><span>Verify Preorder Sequence in Binary Search Tree</span></a>
                </li>
                <li><a href='https://leetcode.com/problems/verify-preorder-serialization-of-a-binary-tree'><span>Verify Preorder Serialization of a Binary Tree</span></a>
                </li>

            </ul>
            <h2><span>Problem description </span></h2>
            <h3><span>Verify Preorder Sequence in Binary Search Tree</span></h3>
            <p><span>Given an array of numbers, verify whether it is the correct preorder traversal sequence of a binary search tree.</span>
            </p>
            <p><span>You may assume each number in the sequence is unique.</span></p>
            <p><span>Consider the following binary search tree: </span></p>
            <pre><code>     5
    / \
   2   6
  / \
 1   3
</code></pre>
            <p><strong><span>Example 1:</span></strong></p>
            <pre><code>Input: [5,2,6,1,3]
Output: false
</code></pre>
            <p><strong><span>Example 2:</span></strong></p>
            <pre><code>Input: [5,2,1,3,6]
Output: true
</code></pre>
            <p><strong><span>Follow up:</span></strong>
                <span>Could you do it using only constant space complexity?</span></p>
            <h3><span>Verify Preorder Serialization of a Binary Tree</span></h3>
            <p><span>One way to serialize a binary tree is to use pre-order traversal. When we encounter a non-null node, we record the node&#39;s value. If it is a null node, we record using a sentinel value such as </span><code>#</code><span>.</span>
            </p>
            <pre><code>     _9_
    /   \
   3     2
  / \   / \
 4   1  #  6
/ \ / \   / \
# # # #   # #
</code></pre>
            <p><span>For example, the above binary tree can be serialized to the string </span><code>&quot;9,3,4,#,#,1,#,#,2,#,6,#,#&quot;</code><span>, where </span><code>#</code><span> represents a null node.</span>
            </p>
            <p><span>Given a string of comma separated values, verify whether it is a correct preorder traversal serialization of a binary tree. Find an algorithm without reconstructing the tree.</span>
            </p>
            <p><span>Each comma separated value in the string must be either an integer or a character </span><code>&#39;#&#39;</code><span> representing </span><code>null</code><span> pointer.</span>
            </p>
            <p><span>You may assume that the input format is always valid, for example it could never contain two consecutive commas such as </span><code>&quot;1,,3&quot;</code><span>.</span>
            </p>
            <p><strong><span>Example 1:</span></strong></p>
            <pre><code>Input: &quot;9,3,4,#,#,1,#,#,2,#,6,#,#&quot;
Output: true
</code></pre>
            <p><strong><span>Example 2:</span></strong></p>
            <pre><code>Input: &quot;1,#&quot;
Output: false
</code></pre>
            <p><strong><span>Example 3:</span></strong></p>
            <pre><code>Input: &quot;9,#,#,1&quot;
Output: false
</code></pre>
            <h2><span>Method</span></h2>
            <h3><span>Verify Preorder Sequence in Binary Search Tree</span></h3>
            <p><span>If current element is smaller than top of stack, it is left subtree of all stack nodes, push the it into stack.</span>
            </p>
            <p><span>Update min value to current subtree&#39;s root when traverse to right subtree.</span></p>
            <h3><span>Verify Preorder Serialization of a Binary Tree</span></h3>
            <p><span>Using stack to store nodes including &quot;#&quot;.</span></p>
            <ul>
                <li><span>Case 1: number -&gt; push it to the stack.</span></li>
                <li>
                    <span>Case 2: # -&gt; check if the top of stack is also #. If so, pop until top of stack is not #.</span>
                    <span>Finally, check if stack size is 1, and stack top is #.</span></li>

            </ul>
            <h2><span>Code</span></h2>
            <h3><span>Verify Preorder Sequence in Binary Search Tree</span></h3>
            <pre><code class='language-java' lang='java'>/**
 * If current element is smaller than top of stack, it is left subtree of all stack nodes, push the it into stack.
 * Update min value to current subtree&#39;s root when traverse to right subtree.
 *
 * @param preorder given array
 * @return whether it is the correct preorder traversal sequence of a binary search tree
 */
public boolean verifyPreorder(int[] preorder) {
    int min = Integer.MIN_VALUE;
    Stack&lt;Integer&gt; s = new Stack&lt;&gt;();

    for (int i : preorder) {
        if (i &lt; min) {      // if left subtree is smaller than root value, then it is invalid BST
            return false;
        }
        while (!s.empty() &amp;&amp; i &gt; s.peek()) {        // if i &gt; s.peek() then i is in right subtree
            min = s.pop();      // update min value to current subtree&#39;s root when traverse to right subtree
        }
        s.push(i);
    }
    return true;
}

/**
 * Use array instead of stack to find root of subtree.
 *
 * @param preorder given array
 * @return whether it is the correct preorder traversal sequence of a binary search tree
 */
private boolean constantSpace(int[] preorder) {
    int min = Integer.MIN_VALUE, i = -1;

    for (int num : preorder) {
        if (num &lt; min) {
            return false;
        }
        while (i &gt;= 0 &amp;&amp; num &gt; preorder[i]) {
            min = preorder[i--];        // in-place find root node of current right subtree
        }
        preorder[++i] = num;
    }
    return true;
}
</code></pre>
            <h3><span>Verify Preorder Serialization of a Binary Tree</span></h3>
            <pre><code class='language-java' lang='java'>/**
 * Using stack to store nodes including &quot;#&quot;.
 * Case 1: number -&gt; push it to the stack.
 * Case 2: # -&gt; check if the top of stack is also #.
 * If so, pop until top of stack is not #.
 * Finally, check if stack size is 1, and stack top is #.
 *
 * @param preorder given preorder nodes
 * @return whether it is a correct preorder traversal serialization of a binary tree
 */
public boolean isValidSerialization(String preorder) {

    /* Corner case */
    if (preorder.charAt(0) == &#39;#&#39; &amp;&amp; preorder.length() &gt; 1) {
        return false;
    }

    Stack&lt;String&gt; s = new Stack&lt;&gt;();
    String[] arr = preorder.split(&quot;,&quot;);

    for (int i = 0; i &lt; arr.length; i++) {

        while (arr[i].equals(&quot;#&quot;) &amp;&amp; !s.isEmpty() &amp;&amp; s.peek().equals(&quot;#&quot;)) {
            s.pop();
            if (s.isEmpty()) {
                return false;       // pop out root -&gt; invalid tree
            }
            s.pop();
        }
        s.push(arr[i]);
    }
    System.out.println(s);
    return s.size() == 1 &amp;&amp; s.peek().equals(&quot;#&quot;);
}

/**
 * All non-null node provides 2 outdegree and 1 indegree (2 children and 1 parent), except root
 * All null node provides 0 outdegree and 1 indegree (0 child and 1 parent).
 * Difference between out degree and in degree: outdegree - indegree
 * If the node is not null, increase diff by 2, because it provides two out degrees.
 * If a serialization is correct, outdegree - indegree should never be negative and diff will be zero when finished.
 *
 * @param preorder given preorder nodes
 * @return whether it is a correct preorder traversal serialization of a binary tree
 */
public boolean degree(String preorder) {

    /* Corner case */
    if (preorder.charAt(0) == &#39;#&#39; &amp;&amp; preorder.length() &gt; 1) {
        return false;
    }

    String[] nodes = preorder.split(&quot;,&quot;);
    int diff = 1;       // root has
    for (String node : nodes) {
        if (--diff &lt; 0) {
            return false;
        }
        if (!node.equals(&quot;#&quot;)) {
            diff += 2;
        }
    }
    return diff == 0;
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>