<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Substring with Concatenation of All Words | Posts</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">
    <link rel="stylesheet" href="../../static/css/post-content.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">About Me</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>Substring with Concatenation of All Words</h1>
        </div>

        <div class="text-right post-date">
            June 18, 2019
        </div>

        <div class="post-main">
            <p>Link: <a href='https://leetcode.com/problems/substring-with-concatenation-of-all-words'>Substring with Concatenation of All Words</a></p>
            <h2>Problem description </h2>
            <p>You are given a string, <strong>s</strong>, and a list of words, <strong>words</strong>, that are all of the same length. Find all starting indices of substring(s) in <strong>s</strong> that is a concatenation of each word in <strong>words</strong> exactly once and without any intervening characters.</p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input:
  s = &quot;barfoothefoobarman&quot;,
  words = [&quot;foo&quot;,&quot;bar&quot;]
Output: [0,9]
Explanation: Substrings starting at index 0 and 9 are &quot;barfoor&quot; and &quot;foobar&quot; respectively.
The output order does not matter, returning [9,0] is fine too.
</code></pre>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input:
  s = &quot;wordgoodgoodgoodbestword&quot;,
  words = [&quot;word&quot;,&quot;good&quot;,&quot;best&quot;,&quot;word&quot;]
Output: []
</code></pre>
            <h2>Method</h2>
            <p>Use two hash map and two pointers to save necessary information. </p>
            <p>One hash map store words in words list, and the value in this hash map is the appearance in words list. The second hash map stores the word appearance in substring, if substring contains correct words, but words appear more than the given words list, then this substring is not supposed to be considered.</p>
            <p>The first pointer is the string index, and the second pointer is to store the start index of substring that may contains the concatenation of all words.</p>
            <h2>Code</h2>
            <pre><code class='language-java' lang='java'>/**
 * Use two maps to store expected appearance times and appeared times.
 * One map to record the expected times of each word, the other map to record the times words have been seen.
 * Then check for every possible position of i.
 * Once an unexpected word was met or the times of some word is larger than its expected times, stop the check.
 * If check is finished successfully, push i to the result indexes.
 *
 * @param s     input string
 * @param words input word list
 * @return indices of word concatenation start
 */
public List&lt;Integer&gt; findSubstring(String s, String[] words) {
    List&lt;Integer&gt; out = new LinkedList&lt;&gt;();

    /* Corner case */
    if (s.length() &lt; 1 || words.length &lt; 1) {
        return out;
    }

    HashMap&lt;String, Integer&gt; wordMap = new HashMap&lt;&gt;();     // save word appearance in words array
    HashMap&lt;String, Integer&gt; stringMap = new HashMap&lt;&gt;();       // save word appearance in string
    for (String w : words) {
        wordMap.put(w, wordMap.getOrDefault(w, 0) + 1);     // avoid corner case such as duplicated words in array or given string
    }

    for (int i = 0; i &lt; s.length() - words[0].length() * words.length + 1; i++) {
        int j = 0;

        while (j &lt; words.length) {      // j is the words index that count # in words[]

            /* Spilt string to a substring that has same length as given word */
            String sub = s.substring(i + j * words[0].length(), i + (j + 1) * words[0].length());

            if (wordMap.containsKey(sub)) {
                stringMap.put(sub, stringMap.getOrDefault(sub, 0) + 1);
                if (stringMap.get(sub) &gt; wordMap.get(sub)) {
                    break;      // substring contains more words than given array
                }
            } else {
                break;      // current substring does not exist in words array
            }
            j++;        // j + 1: next word in array
        }

        if (j == words.length) {
            out.add(i);     // find all correct words in current substring
        }
    }

    return out;
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>