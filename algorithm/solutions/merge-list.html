<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Problem Set: Merge Linked Lists | Algorithm</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">About Me</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>
                Problem Set: Merge Linked Lists
            </h1>
        </div>

        <div class="text-right post-date">
            July 15, 2019
        </div>
        <div class="post-main">
            <p>Links:</p>
            <ul>
                <li><a href='https://leetcode.com/problems/add-two-numbers/'>Add Two Numbers</a></li>
                <li><a href='https://leetcode.com/problems/merge-two-sorted-lists/'>Merge Two Sorted Lists</a></li>
                <li><a href='https://leetcode.com/problems/merge-k-sorted-lists/'>Merge k Sorted Lists</a></li>

            </ul>
            <h2>Problem description </h2>
            <h3>Add Two Numbers</h3>
            <p>You are given two <strong>non-empty</strong> linked lists representing two non-negative integers. The
                digits are stored in <strong>reverse order</strong> and each of their nodes contain a single digit. Add
                the two numbers and return it as a linked list.</p>
            <p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>
            <p><strong>Example:</strong></p>
            <pre><code>Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)
Output: 7 -&gt; 0 -&gt; 8
Explanation: 342 + 465 = 807.
</code></pre>
            <h3>Merge Two Sorted Lists</h3>
            <p>Merge two sorted linked lists and return it as a new list. The new list should be made by splicing
                together the nodes of the first two lists.</p>
            <p><strong>Example:</strong></p>
            <pre><code>Input: 1-&gt;2-&gt;4, 1-&gt;3-&gt;4
Output: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4
</code></pre>
            <h3>Merge k Sorted Lists</h3>
            <p>Merge <em>k</em> sorted linked lists and return it as one sorted list. Analyze and describe its
                complexity.</p>
            <p><strong>Example:</strong></p>
            <pre><code>Input:
[
  1-&gt;4-&gt;5,
  1-&gt;3-&gt;4,
  2-&gt;6
]
Output: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6
</code></pre>
            <h2>Method</h2>
            <h3>Add Two Numbers</h3>
            <p>Both integer is given in <code>ListNode</code>, yet it is actually a <code>LinkedList</code>. It is a
                little complicated if one has no experience in pointer. The return value for this problem is a head node
                that store first digit of sum, and the following node is the rest digits of sum, where every single node
                contains one digit. </p>
            <p>The way to solve this problem is recursion. </p>
            <p>Each time in the entry point of recursion, check whether both nodes and carry from previous sum (the
                initially sum would set carry to 0). If both nodes are null and carry is 0, then end the recursion. This
                situation would be either both list is empty, which is one corner case, or the recursion has reached the
                end point that no more nodes and carry should be added to result.</p>
            <p>If at least one node is non-empty, then add it to carry respectively. Carry can only be 0 or 1 and will
                be updated in each calculation. By doing so, memory consumption can be reduced slightly and sum process
                will not be required.</p>
            <p>After both nodes are checked, create a new node to save value. Note that value is <code>sum % 10</code>.
                If it is in the first iteration, then it is the head node that will be returned. Then set the next
                pointer to the recursion function calling. In this way can all nodes be linked to head node. Also,
                remember to pass carry to next iteration. </p>
            <h3>Merge Two Sorted Lists</h3>
            <p>Simply compare value in two ListNode. Point smaller one as next node.</p>
            <h3>Merge k Sorted Lists</h3>
            <p>Two approaches.</p>
            <ol start=''>
                <li>Divide and conquer. Divide <code>k</code> lists to <code>k/2</code> list pairs. Then sort each two
                    lists respectively. Finally, the k lists will be sorted.
                </li>
                <li>Use heap to store the head of list. Heap will sort the list in <code>nlogk</code> and finally it can
                    sort <code>k</code> lists.
                </li>

            </ol>
            <h2>Code</h2>
            <h3>Add Two Numbers</h3>
            <pre><code class='language-java' lang='java'>/**
 * Sum two nodes and return the sum node until List is empty.
 *
 * @param l1 first int contains in ListNode
 * @param l2 second int contains in ListNode
 * @return result in ListNode
 */
public ListNode addTwoNumbers(ListNode l1, ListNode l2) {
    return helper(l1, l2, 0);
}

/**
 * Add non-empty nodes recursively until all nodes in two lists are reached.
 * Use a int to save carry for next calculation.
 *
 * @param n1    first node
 * @param n2    second node
 * @param carry carry from previous sum
 * @return sum of two nodes
 */
public ListNode helper(ListNode n1, ListNode n2, int carry) {

    /* Corner case and end point */
    if (n1 == null &amp;&amp; n2 == null &amp;&amp; carry == 0) {
        return null;
    }

    if (n1 != null) {
        carry += n1.val;
    }
    if (n2 != null) {
        carry += n2.val;
    }

    ListNode current = new ListNode(carry % 10);        // create a node to store this digit
    current.next = helper(n1 == null ? null : n1.next, n2 == null ? null : n2.next, carry / 10);
    return current;
}
</code></pre>
            <h3>Merge Two Sorted Lists</h3>
            <pre><code class='language-java' lang='java'>/**
 * Simply compare value in two ListNode. Point smaller one as next node.
 *
 * @param l1 first node
 * @param l2 second node
 * @return next smaller node
 */
public ListNode mergeTwoLists(ListNode l1, ListNode l2) {
    ListNode dummy = new ListNode(0);
    ListNode current = dummy;

    while (l1 != null || l2 != null) {
        if (l1 == null || (l2 != null &amp;&amp; l1.val &gt;= l2.val)) {
            current.next = l2;
            current = l2;
            l2 = l2.next;
        } else {
            current.next = l1;
            current = l1;
            l1 = l1.next;
        }
    }
    return dummy.next;
}
</code></pre>
            <h3>Merge k Sorted Lists</h3>
            <pre><code class='language-java' lang='java'>/**
 * Use divide and conquer to merge each two lists and recursively complete this process until only one list left.
 *
 * @param lists input LitNode Array
 * @return next ListNode
 */
public ListNode mergeKLists(ListNode[] lists) {

    /* Corner case */
    if (lists.length == 0) {
        return null;
    }
    if (lists.length == 1) {
        return lists[0];
    }

    return divide(lists, 0, lists.length - 1);
}


/**
 * Divide input lists from mid and put into two subpart recursively, until each subpart only has one element.
 * Then merge these two lists using mergeTwoLists method.
 * Finally, the whole ListNode list will be merged and this merged list will be returned.
 *
 * @param list  input list
 * @param start strat index
 * @param end   end index
 * @return merged result
 */
public ListNode divide(ListNode[] list, int start, int end) {
    if (start == end) {
        return list[start];
    }
    if (start &lt; end) {
        int mid = (end + start) / 2;
        ListNode l1 = divide(list, start, mid);
        ListNode l2 = divide(list, mid + 1, end);
        return mergeTwoLists(l1, l2);
    } else {
        return null;
    }
}

/**
 * Merge two sorted linked lists and return it as a new list.
 *
 * @param l1 first node
 * @param l2 second node
 * @return next smaller node
 */
public ListNode mergeTwoLists(ListNode l1, ListNode l2) {
    if (l1 == null) {
        return l2;
    }
    if (l2 == null) {
        return l1;
    }
    if (l1.val &lt; l2.val) {
        l1.next = mergeTwoLists(l1.next, l2);
        return l1;
    } else {
        l2.next = mergeTwoLists(l1, l2.next);
        return l2;
    }
}

/**
 * Use heap to store the head node of each list and sort head node.
 *
 * @param lists given K lists
 * @return sorted list
 */
public ListNode heap(ListNode[] lists) {

    /* Corner case */
    if (lists.length == 0) {
        return null;
    }
    if (lists.length == 1) {
        return lists[0];
    }

    PriorityQueue&lt;ListNode&gt; q = new PriorityQueue&lt;&gt;(Comparator.comparingInt(o -&gt; o.val));

    ListNode dummy = new ListNode(0);
    ListNode tail = dummy;


    for (ListNode node : lists) {
        if (node != null) {
            q.add(node);
        }
    }

    while (!q.isEmpty()) {
        tail.next = q.poll();
        tail = tail.next;
        if (tail.next != null) {
            q.add(tail.next);
        }
    }
    return dummy.next;
}
</code></pre>
        </div>
    </div>
</section>

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!--        inner script to control nav bar background color        -->
<script>
    $(function () {
        $(document).scroll(function () {

            let $nav = $("#mainNav");
            $nav.toggleClass("scrolled", $(this).scrollTop() > $nav.height());
        })
    })
</script>
</body>
</html>