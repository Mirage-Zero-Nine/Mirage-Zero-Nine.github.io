<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Stream of Characters | Algorithm</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
    <link rel="stylesheet" href="../../static/css/coding.css">
    <script src="../../static/script/coding_style.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style> @media print {
        .hljs {
            overflow: visible;
            word-wrap: break-word !important;
        }
    }</style>
</head>
<body>

<!--        nav bar     -->
<nav id="mainNav" class="navbar navbar-expand-lg py-0 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">About Me</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>
                Stream of Characters
            </h1>
        </div>

        <div class="text-right post-date">
            August 09, 2019
        </div>
        <div class="post-main">
            <p>Link: <a href='https://leetcode.com/problems/stream-of-characters/'>Stream of Characters</a></p>
            <h2>Problem description </h2>
            <p>Implement the <code>StreamChecker</code> class as follows:</p>
            <ul>
                <li><code>StreamChecker(words)</code>: Constructor, init the data structure with the given words.</li>
                <li><code>query(letter)</code>: returns true if and only if for some <code>k &gt;= 1</code>, the last
                    <code>k</code> characters queried (in order from oldest to newest, including this letter just
                    queried) spell one of the words in the given list.
                </li>

            </ul>
            <p><strong>Example:</strong></p>
            <pre><code>StreamChecker streamChecker = new StreamChecker([&quot;cd&quot;,&quot;f&quot;,&quot;kl&quot;]); // init the dictionary.
streamChecker.query(&#39;a&#39;);          // return false
streamChecker.query(&#39;b&#39;);          // return false
streamChecker.query(&#39;c&#39;);          // return false
streamChecker.query(&#39;d&#39;);          // return true, because &#39;cd&#39; is in the wordlist
streamChecker.query(&#39;e&#39;);          // return false
streamChecker.query(&#39;f&#39;);          // return true, because &#39;f&#39; is in the wordlist
streamChecker.query(&#39;g&#39;);          // return false
streamChecker.query(&#39;h&#39;);          // return false
streamChecker.query(&#39;i&#39;);          // return false
streamChecker.query(&#39;j&#39;);          // return false
streamChecker.query(&#39;k&#39;);          // return false
streamChecker.query(&#39;l&#39;);          // return true, because &#39;kl&#39; is in the wordlist
</code></pre>
            <p><strong>Note:</strong></p>
            <ul>
                <li><code>1 &lt;= words.length &lt;= 2000</code></li>
                <li><code>1 &lt;= words[i].length &lt;= 2000</code></li>
                <li>Words will only consist of lowercase English letters.</li>
                <li>Queries will only consist of lowercase English letters.</li>
                <li>The number of queries is at most 40000.</li>

            </ul>
            <h2>Method</h2>
            <p>Use a trie to store all words, but note that store words in reverse order. Then when <code>query()</code>
                is called, search from back to beginning of queue that temporary stores the stream of chars.</p>
            <h2>Code</h2>
            <pre><code class='language-java' lang='java'>public class StreamChecker {
    static class TrieNode {
        TrieNode[] next = new TrieNode[26];
        boolean isEnd;
    }

    private LinkedList&lt;Character&gt; temp = new LinkedList&lt;&gt;();        // save part of stream
    private TrieNode root = new TrieNode();
    private int max = 0;        // max size of list, which is the longest word in given array

    /**
     * Init of class, build a trie based on given words.
     *
     * @param words given words list
     */
    public StreamChecker(String[] words) {
        buildTire(words);
    }

    /**
     * Returns true iff for some k &gt;= 1, the last k characters queried spell one of the words in the given list.
     * (in order from oldest to newest, including this letter just queried)
     * Search from back of list to the beginning, if there is an end in trie under current char, return true.
     * Otherwise, return false.
     * Use reversed searching to assure it fits the last k chars rule.
     *
     * @param letter given letter
     * @return true if last k characters queried spell one of the words in the given list, false otherwise
     */
    public boolean query(char letter) {
        temp.add(letter);
        if (temp.size() &gt; max) {
            temp.removeFirst();     // keep list size not larger than longest word in list to save memory
        }

        TrieNode n = root;

        for (int i = temp.size() - 1; i &gt;= 0 &amp;&amp; n != null; i--) {
            n = n.next[temp.get(i) - &#39;a&#39;];      // find next node in trie
            if (n != null &amp;&amp; n.isEnd) {     // if next node exist and is one word end
                return true;
            }
        }
        return false;
    }

    /**
     * Build trie. Note that it is build in reverse order, and so it is to the traversal process in query.
     *
     * @param words given word list
     */
    private void buildTire(String[] words) {
        for (String w : words) {
            max = Math.max(w.length(), max);
            TrieNode n = root;
            for (int i = w.length() - 1; i &gt;= 0; i--) {
                char c = w.charAt(i);
                if (n.next[c - &#39;a&#39;] == null) {
                    n.next[c - &#39;a&#39;] = new TrieNode();
                }
                n = n.next[c - &#39;a&#39;];
            }
            n.isEnd = true;
        }
    }

    public static void main(String[] args) {
        StreamChecker test = new StreamChecker_1032(new String[]{&quot;cd&quot;, &quot;f&quot;, &quot;kl&quot;});
        System.out.println(test.query(&#39;c&#39;));
        System.out.println(test.query(&#39;d&#39;));
        System.out.println(test.query(&#39;d&#39;));
        System.out.println(test.query(&#39;f&#39;));
    }
}
</code></pre>
        </div>
    </div>
</section>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>

<!-- Nav bar control -->
<script src="../../static/script/nav-bar.js"></script>
</body>
</html>