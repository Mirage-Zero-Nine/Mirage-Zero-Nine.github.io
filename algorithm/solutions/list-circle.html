<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Linked List Cycle I/II | Posts</title>
    <link rel="stylesheet" type="text/css"
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Martel+Sans:200,300,400,600,700,800,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:200i,400,800" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/post-content.css">
    <link rel="stylesheet" href="../../static/bootstrap-4.3.1-dist/css/bootstrap.css">
    <link rel="stylesheet" href="../../static/css/post-content.css">

    <!--    title icon        -->
    <link rel="shortcut icon" type="image/x-icon" href="../../static/img/Avatar-3.jpg"/>
</head>
<body>

<!--        nav bar     -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://yyzhou95.github.io/">HOME</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../index.html">Posts <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../tags/index.html">Tags <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../algorithm/index.html">Algorithm <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../archived/index.html">Archived <span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Other Links
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="https://github.com/yyzhou95">Github</a>
                        <a class="dropdown-item" href="https://github.com/yyzhou95/yyzhou95.github.io">This page</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="../../about/">About Me</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<section class="post-content">
    <div class="container">

        <div class="post-heading">
            <h1>Linked List Cycle I/II</h1>
        </div>

        <div class="text-right post-date">
            June 20, 2019
        </div>

        <div class="post-main">
            <p>Links: </p>
            <ul>
                <li><a href='https://leetcode.com/problems/linked-list-cycle'>Linked List Cycle</a></li>
                <li><a href='https://leetcode.com/problems/linked-list-cycle-ii'>Linked List Cycle II</a></li>
                <li><a href='https://leetcode.com/problems/intersection-of-two-linked-lists'>Intersection of Two Linked
                    Lists</a></li>

            </ul>
            <h2>Problem description </h2>
            <h3>Linked List Cycle</h3>
            <p>Given a linked list, determine if it has a cycle in it.</p>
            <p>To represent a cycle in the given linked list, we use an integer <code>pos</code> which represents the
                position (0-indexed) in the linked list where tail connects to. If <code>pos</code> is <code>-1</code>,
                then there is no cycle in the linked list.</p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input: head = [3,2,0,-4], pos = 1
Output: true
Explanation: There is a cycle in the linked list, where tail connects to the second node.
</code></pre>
            <p><img src='../../static/img/circularlinkedlist.png' alt='img' style="width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input: head = [1,2], pos = 0
Output: true
Explanation: There is a cycle in the linked list, where tail connects to the first node.
</code></pre>
            <p><img src='../../static/img/circularlinkedlist_test2.png' alt='img' style="width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p><strong>Example 3:</strong></p>
            <pre><code>Input: head = [1], pos = -1
Output: false
Explanation: There is no cycle in the linked list.
</code></pre>
            <p><img src='../../static/img/circularlinkedlist_test3.png' alt='img' style="width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p><strong>Follow up:</strong></p>
            <p>Can you solve it using <em>O(1)</em> (i.e. constant) memory?</p>
            <h3>Linked List Cycle II</h3>
            <p>Given a linked list, return the node where the cycle begins. If there is no cycle, return
                <code>null</code>.</p>
            <p>To represent a cycle in the given linked list, we use an integer <code>pos</code> which represents the
                position (0-indexed) in the linked list where tail connects to. If <code>pos</code> is <code>-1</code>,
                then there is no cycle in the linked list.</p>
            <p><strong>Note:</strong> Do not modify the linked list. </p>
            <p><strong>Example 1:</strong></p>
            <pre><code>Input: head = [3,2,0,-4], pos = 1
Output: tail connects to node index 1
Explanation: There is a cycle in the linked list, where tail connects to the second node.
</code></pre>
            <p><img src='../../static/img/circularlinkedlist.png' alt='img' style="width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p><strong>Example 2:</strong></p>
            <pre><code>Input: head = [1,2], pos = 0
Output: tail connects to node index 0
Explanation: There is a cycle in the linked list, where tail connects to the first node.
</code></pre>
            <p><img src='../../static/img/circularlinkedlist_test2.png' alt='img' style="width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p><strong>Example 3:</strong></p>
            <pre><code>Input: head = [1], pos = -1
Output: no cycle
Explanation: There is no cycle in the linked list.
</code></pre>
            <p><img src='../../static/img/circularlinkedlist_test3.png' alt='img' style="width: auto"
                    referrerPolicy='no-referrer'/></p>
            <p><strong>Follow-up</strong>:
                Can you solve it without using extra space?</p>
            <h3>Intersection of Two Linked Lists</h3>
            <p>Write a program to find the node at which the intersection of two singly linked lists begins.</p>
            <p>For example, the following two linked lists:</p>
            <p><img src='../../static/img/160_statement.png' alt='img' style="width: auto;height: auto"
                    referrerPolicy='no-referrer'/></p>
            <p>&nbsp;</p>
            <p>begin to intersect at node c1.</p>
            <p></p>
            <p><strong>Example 1:</strong></p>
            <p><img src='../../static/img/160_example_1.png' alt='img' style="width: auto;height: auto"
                    referrerPolicy='no-referrer'/></p>
            <p>&nbsp;</p>
            <pre><code>Input: intersectVal = 8, listA = [4,1,8,4,5], listB = [5,0,1,8,4,5], skipA = 2, skipB = 3
Output: Reference of the node with value = 8
Input Explanation: The intersected node&#39;s value is 8 (note that this must not be 0 if the two lists intersect). From the head of A, it reads as [4,1,8,4,5]. From the head of B, it reads as [5,0,1,8,4,5]. There are 2 nodes before the intersected node in A; There are 3 nodes before the intersected node in B.
</code></pre>
            <p></p>
            <p><strong>Example 2:</strong></p>
            <p><img src='../../static/img/160_example_2.png' alt='img' style="width: auto;height: auto"
                    referrerPolicy='no-referrer'/></p>
            <p>&nbsp;</p>
            <pre><code>Input: intersectVal = 2, listA = [0,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1
Output: Reference of the node with value = 2
Input Explanation: The intersected node&#39;s value is 2 (note that this must not be 0 if the two lists intersect). From the head of A, it reads as [0,9,1,2,4]. From the head of B, it reads as [3,2,4]. There are 3 nodes before the intersected node in A; There are 1 node before the intersected node in B.
</code></pre>
            <p></p>
            <p><strong>Example 3:</strong></p>
            <p><img src='../../static/img/160_example_3.png' alt='img' style="width: auto;height: auto"
                    referrerPolicy='no-referrer'/></p>
            <p>&nbsp;</p>
            <pre><code>Input: intersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2
Output: null
Input Explanation: From the head of A, it reads as [2,6,4]. From the head of B, it reads as [1,5]. Since the two lists do not intersect, intersectVal must be 0, while skipA and skipB can be arbitrary values.
Explanation: The two lists do not intersect, so return null.
</code></pre>
            <p></p>
            <p><strong>Notes:</strong></p>
            <ul>
                <li>If the two linked lists have no intersection at all, return <code>null</code>.</li>
                <li>The linked lists must retain their original structure after the function returns.</li>
                <li>You may assume there are no cycles anywhere in the entire linked structure.</li>
                <li>Your code should preferably run in O(n) time and use only O(1) memory.</li>

            </ul>
            <h2>Method</h2>
            <h3>Linked List Cycle</h3>
            <p>Two pointers. Faster one moves twice as slow pointer. If the given list has a cycle, two pointers will
                eventually meet.</p>
            <h3>Linked List Cycle II</h3>
            <p>Two pointers. One fast and one slow. Fast pointer moves two nodes one time and slow pointer moves one
                node each time.</p>
            <p>Suppose the first meet at step k, the length of the Cycle is r, then: </p>
            <pre><code>2k - k = n * r
=&gt; k = n * r
</code></pre>
            <p>Assume distance between the start node of list and the start node of cycle is s, the distance between the
                start of list and the first meeting node is k, distance between the start node of cycle and the first
                meeting node is m</p>
            <pre><code>=&gt; s = k - m
=&gt; s = nr - m = (n - 1) * r + (r - m)
</code></pre>
            <p>Take n = 1, using one pointer start at the beginning of list, another pointer start at meeting node. All
                of them wake one step at a time. The first time they meeting each other is the start of the cycle.</p>
            <h3>Intersection of Two Linked Lists</h3>
            <p>Two pointers. Each pointer starts at the beginning of A/B. When traverse to the end of each list, swap to
                the other list. If there is an intersection, these two pointers will meet there.</p>
            <p>The reason is that if there is an intersection, then the difference between first pointer and second
                pointer is the path difference before the intersection. Hence, move pointers to the other list will make
                them have moving distance when they meet.</p>
            <h2>Code</h2>
            <h3>Linked List Cycle</h3>
            <pre><code class='language-java' lang='java'>/**
 * Two pointers. Faster one moves twice as slow pointer.
 * If the given list has a cycle, two pointers will eventually meet.
 * Otherwise, if fast reaches null, then there is no cycle in list.
 *
 * @param head head of list
 * @return if it has a cycle in it
 */
public boolean hasCycle(ListNode head) {

    /* Corner case */
    if (head == null || head.next == null) {
        return false;
    }

    ListNode slow = head;
    ListNode fast = head.next;

    while (slow != null) {

        if (slow.val == fast.val) {
            return true;
        }

        slow = slow.next;

        if (fast.next != null &amp;&amp; fast.next.next != null) {      // reaches the end of list if no cycle found
            fast = fast.next.next;
        } else {
            return false;
        }
    }
    return false;
}
</code></pre>
            <h3>Linked List Cycle II</h3>
            <pre><code class='language-java' lang='java'>/**
 * Two pointers. Fast pointer moves two nodes one time and slow pointer moves one node each time.
 * Suppose the first meet at step k, the length of the Cycle is r, then, 2k - k = n * r =&gt; k = n * r
 * Assume distance between the start node of list and the start node of cycle is s.
 * The distance between the start of list and the first meeting node is k.
 * The distance between the start node of cycle and the first meeting node is m
 * =&gt; s = k - m
 * =&gt; s = nr - m = (n - 1) * r + (r - m)
 * Take n = 1, using one pointer start at the beginning of list, another pointer start at meeting node.
 * All of them wake one step at a time.
 * The first time they meeting each other is the start of the cycle.
 *
 * @param head head node of list
 * @return the node where the cycle begins, return null if there is no cycle
 */
public ListNode detectCycle(ListNode head) {

    /* Corner case */
    if (head == null || head.next == null) {
        return null;
    }

    ListNode slow = head, fast = head;

    while (fast != null &amp;&amp; fast.next != null) {
        slow = slow.next;
        fast = fast.next.next;

        if (slow == fast) {     // found a cycle
            while (head != slow) {
                head = head.next;       // move head (as a pointer) until slow and start meets
                slow = slow.next;       // actually I think this is not safe (memory)
            }
            return head;        // two nodes will meet at cycle start
        }
    }
    return null;
}
</code></pre>
            <h3>Intersection of Two Linked Lists</h3>
            <pre><code class='language-java' lang='java'>/**
 * Two pointers. Each pointer starts at the beginning of A/B.
 * When traverse to the end of each list, swap to the other list.
 * If there is an intersection, these two pointers will meet there.
 *
 * @param headA first list head
 * @param headB second list head
 * @return intersection node
 */
public ListNode getIntersectionNode(ListNode headA, ListNode headB) {

    /* Corner case */
    if (headA == null || headB == null) {
        return null;
    }

    ListNode p1 = headA, p2 = headB;

    while (p1 != p2) {
        p1 = (p1 != null) ? p1.next : headB;        // if reaches the end, move to next list
        p2 = (p2 != null) ? p2.next : headA;        // if reaches the end, move to next list
    }

    return p1;
}
</code></pre>
        </div>
    </div>
</section>
<!--        inner script to control nav bar        -->

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--        This order must be followed!!       -->
<script src="../../static/jquery/jquery-3.3.1.js"></script>
<script src="../../static/popper/popper.js"></script>
<script src="../../static/bootstrap-4.3.1-dist/js/bootstrap.js"></script>
</body>
</html>